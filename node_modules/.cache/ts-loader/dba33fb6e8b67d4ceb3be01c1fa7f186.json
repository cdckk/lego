{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\helper.ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\helper.ts","mtime":1678114624444},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1678260403893},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js","mtime":1674816759137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgeyBtZXNzYWdlIH0gZnJvbSAnYW50LWRlc2lnbi12dWUnOwpleHBvcnQgZnVuY3Rpb24gYmVmb3JlVXBsb2FkQ2hlY2soZmlsZSwgY29uZGl0aW9uKSB7CiAgY29uc3QgewogICAgZm9ybWF0LAogICAgc2l6ZQogIH0gPSBjb25kaXRpb247CiAgY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZvcm1hdCA/IGZvcm1hdC5pbmNsdWRlcyhmaWxlLnR5cGUpIDogdHJ1ZTsKICAvLyBjb25zdCBpc1ZhbGlkU2l6ZSA9IHNpemUgPyAoZmlsZS5zaXplIC8gMTAyNCAvMTAyNCA8IHNpemUpIDogdHJ1ZQogIGNvbnN0IGlzVmFsaWRTaXplID0gc2l6ZSA/IGZpbGUuc2l6ZSA6IHRydWU7CiAgbGV0IGVycm9yID0gbnVsbDsKICBpZiAoIWlzVmFsaWRGb3JtYXQpIHsKICAgIGVycm9yID0gJ2Zvcm1hdCc7CiAgfQogIGlmICghaXNWYWxpZFNpemUpIHsKICAgIGVycm9yID0gJ3NpemUnOwogIH0KICByZXR1cm4gewogICAgcGFzc2VkOiBpc1ZhbGlkU2l6ZSAmJiBpc1ZhbGlkU2l6ZSwKICAgIGVycm9yCiAgfTsKfQpleHBvcnQgY29uc3QgY29tbW9uVXBsb2FkQ2hlY2sgPSBmaWxlID0+IHsKICBjb25zdCByZXN1bHQgPSBiZWZvcmVVcGxvYWRDaGVjayhmaWxlLCB7CiAgICBmb3JtYXQ6IFsnaW1hZ2UvanBlZycsICdpbWFnZS9wbmcnXSwKICAgIHNpemU6IDEKICB9KTsKICBjb25zdCB7CiAgICBwYXNzZWQsCiAgICBlcnJvcgogIH0gPSByZXN1bHQ7CiAgaWYgKGVycm9yID09PSAnZm9ybWF0JykgewogICAgbWVzc2FnZS5lcnJvcign5LiK5Lyg5Zu+54mH5Y+q6IO95pivSlBHL1BOR+agvOW8j++8gScpOwogIH0KICBpZiAoZXJyb3IgPT09ICdzaXplJykgewogICAgbWVzc2FnZS5lcnJvcign5LiK5Lyg5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HMU1iJyk7CiAgfQogIHJldHVybiBwYXNzZWQ7Cn07CmV4cG9ydCBjb25zdCBnZXRJbWFnZURpbWVuc2lvbnMgPSB1cmwgPT4gewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgIGltZy5zcmMgPSB1cmw7CiAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgY29uc3QgewogICAgICAgIG5hdHVyYWxXaWR0aDogd2lkdGgsCiAgICAgICAgbmF0dXJhbEhlaWdodDogaGVpZ2h0CiAgICAgIH0gPSBpbWc7CiAgICAgIHJlc29sdmUoewogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodAogICAgICB9KTsKICAgIH0pOwogICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4gewogICAgICByZWplY3QobmV3IEVycm9yKCdUaGVyZSB3YXMgc29tZSBwcm9ibGVtIHdpdGggdGhlIGltYWdlLicpKTsKICAgIH0pOwogIH0pOwp9OwpleHBvcnQgY29uc3QgZ2V0UGFyZW50RWxlbWVudCA9IChlbGVtZW50LCBjbGFzc05hbWUpID0+IHsKICB3aGlsZSAoZWxlbWVudCkgewogICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHsKICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICB9IGVsc2UgewogICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlOwogICAgfQogIH0KICByZXR1cm4gbnVsbDsKfTs="},{"version":3,"mappings":";AAAA,SAASA,OAAO,QAAQ,gBAAgB;AAUxC,OAAM,SAAUC,iBAAiB,CAACC,IAAU,EAAEC,SAAyB;EACrE,MAAM;IAACC,MAAM;IAAEC;EAAI,CAAC,GAAGF,SAAS;EAChC,MAAMG,aAAa,GAAGF,MAAM,GAAGA,MAAM,CAACG,QAAQ,CAACL,IAAI,CAACM,IAAI,CAAC,GAAG,IAAI;EAChE;EACA,MAAMC,WAAW,GAAGJ,IAAI,GAAIH,IAAI,CAACG,IAAI,GAAI,IAAI;EAC7C,IAAIK,KAAK,GAAc,IAAI;EAC3B,IAAI,CAACJ,aAAa,EAAE;IAClBI,KAAK,GAAG,QAAQ;;EAElB,IAAI,CAACD,WAAW,EAAE;IAChBC,KAAK,GAAG,MAAM;;EAEhB,OAAO;IACLC,MAAM,EAAEF,WAAW,IAAIA,WAAW;IAClCC;GACD;AACH;AAEA,OAAO,MAAME,iBAAiB,GAAIV,IAAU,IAAI;EAC9C,MAAMW,MAAM,GAAGZ,iBAAiB,CAACC,IAAI,EAAE;IAAEE,MAAM,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC;IAAEC,IAAI,EAAE;EAAC,CAAC,CAAC;EACvF,MAAM;IAAEM,MAAM;IAAED;EAAK,CAAE,GAAGG,MAAM;EAChC,IAAIH,KAAK,KAAK,QAAQ,EAAE;IACtBV,OAAO,CAACU,KAAK,CAAC,mBAAmB,CAAC;;EAEpC,IAAIA,KAAK,KAAK,MAAM,EAAE;IACpBV,OAAO,CAACU,KAAK,CAAC,eAAe,CAAC;;EAEhC,OAAOC,MAAM;AACf,CAAC;AAED,OAAO,MAAMG,kBAAkB,GAAIC,GAAW,IAAI;EAChD,OAAO,IAAIC,OAAO,CAAkC,CAACC,OAAO,EAAEC,MAAM,KAAI;IACtE,MAAMC,GAAG,GAAG,IAAIC,KAAK,EAAE;IACvBD,GAAG,CAACE,GAAG,GAAGN,GAAG;IACbI,GAAG,CAACG,gBAAgB,CAAC,MAAM,EAAC,MAAK;MAC/B,MAAM;QAAEC,YAAY,EAAEC,KAAK;QAAEC,aAAa,EAAEC;MAAM,CAAE,GAAGP,GAAG;MAC1DF,OAAO,CAAC;QAAEO,KAAK;QAAEE;MAAM,CAAE,CAAC;IAC5B,CAAC,CAAC;IACFP,GAAG,CAACG,gBAAgB,CAAC,OAAO,EAAE,MAAK;MACjCJ,MAAM,CAAC,IAAIS,KAAK,CAAC,wCAAwC,CAAC,CAAC;IAC7D,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMC,gBAAgB,GAAG,CAACC,OAAoB,EAAEC,SAAiB,KAAI;EAC1E,OAAMD,OAAO,EAAE;IACb,IAAGA,OAAO,CAACE,SAAS,IAAIF,OAAO,CAACE,SAAS,CAACC,QAAQ,CAACF,SAAS,CAAC,EAAE;MAC7D,OAAOD,OAAO;KACf,MAAM;MACLA,OAAO,GAAGA,OAAO,CAACI,UAAyB;;;EAG/C,OAAO,IAAI;AACb,CAAC","names":["message","beforeUploadCheck","file","condition","format","size","isValidFormat","includes","type","isValidSize","error","passed","commonUploadCheck","result","getImageDimensions","url","Promise","resolve","reject","img","Image","src","addEventListener","naturalWidth","width","naturalHeight","height","Error","getParentElement","element","className","classList","contains","parentNode"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\helper.ts"],"sourcesContent":["import { message } from 'ant-design-vue'\r\n\r\nexport interface CheckCondition {\r\n format: string[];\r\n//  使用多少M为单位\r\n size: number;\r\n}\r\n\r\ntype ErrorType = 'size' | 'format' | null\r\n\r\nexport function beforeUploadCheck(file: File, condition: CheckCondition) {\r\n  const {format, size} = condition\r\n  const isValidFormat = format ? format.includes(file.type) : true\r\n  // const isValidSize = size ? (file.size / 1024 /1024 < size) : true\r\n  const isValidSize = size ? (file.size) : true\r\n  let error: ErrorType = null\r\n  if (!isValidFormat) {\r\n    error = 'format'\r\n  }\r\n  if (!isValidSize) {\r\n    error = 'size'\r\n  }\r\n  return {\r\n    passed: isValidSize && isValidSize,\r\n    error\r\n  }\r\n}\r\n\r\nexport const commonUploadCheck = (file: File) => {\r\n  const result = beforeUploadCheck(file, { format: ['image/jpeg', 'image/png'], size: 1})\r\n  const { passed, error } = result\r\n  if (error === 'format') {\r\n    message.error('上传图片只能是JPG/PNG格式！')\r\n  }\r\n  if (error === 'size') {\r\n    message.error('上传图片大小不能超过1Mb')\r\n  }\r\n  return passed\r\n}\r\n\r\nexport const getImageDimensions = (url: string) => {\r\n  return new Promise<{width: number;height: number }>((resolve, reject) => {\r\n    const img = new Image()\r\n    img.src = url\r\n    img.addEventListener('load',() => {\r\n      const { naturalWidth: width, naturalHeight: height } = img\r\n      resolve({ width, height })\r\n    })\r\n    img.addEventListener('error', () => {\r\n      reject(new Error('There was some problem with the image.'))\r\n    })\r\n  })\r\n}\r\n\r\nexport const getParentElement = (element: HTMLElement, className: string) => {\r\n  while(element) {\r\n    if(element.classList && element.classList.contains(className)) {\r\n      return element\r\n    } else {\r\n      element = element.parentNode as HTMLElement\r\n    }\r\n  }\r\n  return null\r\n}"]}]}