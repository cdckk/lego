{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue?vue&type=script&setup=true&lang=ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue","mtime":1678173054151},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1678260403893},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyByZWYsIHdhdGNoLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB1c2VLZXlQcmVzcyBmcm9tICcuLi9ob29rcy91c2VLZXlQcmVzcyc7CmltcG9ydCB1c2VDbGlja091dHNpZGUgZnJvbSAnLi4vaG9va3MvdXNlQ2xpY2tPdXRzaWRlJzsKZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL19kZWZpbmVDb21wb25lbnQoewogIF9fbmFtZTogJ0lubGluZUVkaXQnLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVlc3Q6IHRydWUKICAgIH0KICB9LAogIGVtaXRzOiBbJ2NoYW5nZSddLAogIHNldHVwKF9fcHJvcHMsIHsKICAgIGV4cG9zZSwKICAgIGVtaXQKICB9KSB7CiAgICBleHBvc2UoKTsKICAgIGNvbnN0IHByb3BzID0gX19wcm9wczsKICAgIGxldCBjYWNoZU9sZFZhbHVlID0gJyc7CiAgICBjb25zdCBpbm5lclZhbHVlID0gcmVmKHByb3BzLnZhbHVlKTsKICAgIC8vIOWxnuaAp+abtOaWsOaXtuWGhemDqOaVsOaNrui/mOaYr+aXp+eahAogICAgd2F0Y2goKCkgPT4gcHJvcHMudmFsdWUsIG5ld1ZhbHVlID0+IHsKICAgICAgLy8gaWYgKG5ld1ZhbHVlKSB7CiAgICAgIGlubmVyVmFsdWUudmFsdWUgPSBuZXdWYWx1ZTsKICAgICAgLy8gfQogICAgfSk7CgogICAgY29uc3QgaXNFZGl0aW5nID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IHdyYXBwZXIgPSByZWYobnVsbCk7CiAgICBjb25zdCBpbnB1dFJlZiA9IHJlZihudWxsKTsKICAgIGNvbnN0IGlzT3V0c2lkZSA9IHVzZUNsaWNrT3V0c2lkZSh3cmFwcGVyKTsKICAgIHdhdGNoKGlzT3V0c2lkZSwgbmV3VmFsdWUgPT4gewogICAgICBjb25zb2xlLmxvZyhpc091dHNpZGUudmFsdWUsIG5ld1ZhbHVlKTsKICAgICAgaWYgKG5ld1ZhbHVlICYmIGlzRWRpdGluZy52YWx1ZSkgewogICAgICAgIGlzRWRpdGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIGVtaXQoJ2NoYW5nZScsIGlubmVyVmFsdWUudmFsdWUpOwogICAgICB9CiAgICAgIGlzT3V0c2lkZS52YWx1ZSA9IGZhbHNlOwogICAgfSk7CiAgICB3YXRjaChpc0VkaXRpbmcsIGFzeW5jIGlzRWRpdGluZyA9PiB7CiAgICAgIGlmIChpc0VkaXRpbmcpIHsKICAgICAgICBjYWNoZU9sZFZhbHVlID0gaW5uZXJWYWx1ZS52YWx1ZTsKICAgICAgICBhd2FpdCBuZXh0VGljaygpOwogICAgICAgIGlmIChpbnB1dFJlZi52YWx1ZSkgewogICAgICAgICAgaW5wdXRSZWYudmFsdWUuZm9jdXMoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoKSA9PiB7CiAgICAgIGlzRWRpdGluZy52YWx1ZSA9IHRydWU7CiAgICAgIGNvbnNvbGUubG9nKCfngrnnu4Tku7YnKTsKICAgICAgLyoqDQogICAgICAgKiDnu4Tku7bmm7TmlrDmmK/lvILmraXnmoQNCiAgICAgICAqLwogICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgLy8gICBpZiAoaW5wdXRSZWYudmFsdWUpIHsKICAgICAgLy8gICAgIGlucHV0UmVmLnZhbHVlLmZvY3VzKCkKICAgICAgLy8gICB9CiAgICAgIC8vIH0sIDUwMCk7CiAgICB9OwoKICAgIHVzZUtleVByZXNzKCdFbnRlcicsICgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ2VudGVy5LqL5Lu2Jyk7CiAgICAgIGlmIChpc0VkaXRpbmcudmFsdWUpIHsKICAgICAgICBpc0VkaXRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICBlbWl0KCdjaGFuZ2UnLCBpbm5lclZhbHVlLnZhbHVlKTsKICAgICAgfQogICAgfSk7CiAgICB1c2VLZXlQcmVzcygnRXNjYXBlJywgKCkgPT4gewogICAgICBpZiAoaXNFZGl0aW5nLnZhbHVlKSB7CiAgICAgICAgaXNFZGl0aW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgaW5uZXJWYWx1ZS52YWx1ZSA9IGNhY2hlT2xkVmFsdWU7CiAgICAgIH0KICAgIH0pOwogICAgY29uc3QgX19yZXR1cm5lZF9fID0gewogICAgICBwcm9wcywKICAgICAgZ2V0IGNhY2hlT2xkVmFsdWUoKSB7CiAgICAgICAgcmV0dXJuIGNhY2hlT2xkVmFsdWU7CiAgICAgIH0sCiAgICAgIHNldCBjYWNoZU9sZFZhbHVlKHYpIHsKICAgICAgICBjYWNoZU9sZFZhbHVlID0gdjsKICAgICAgfSwKICAgICAgZW1pdCwKICAgICAgaW5uZXJWYWx1ZSwKICAgICAgaXNFZGl0aW5nLAogICAgICB3cmFwcGVyLAogICAgICBpbnB1dFJlZiwKICAgICAgaXNPdXRzaWRlLAogICAgICBoYW5kbGVDbGljawogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gX19yZXR1cm5lZF9fOwogIH0KfSk7"},{"version":3,"mappings":"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","names":["defineComponent","_defineComponent","ref","watch","nextTick","useKeyPress","useClickOutside","__name","props","value","type","String","request","emits","setup","__props","expose","emit","cacheOldValue","innerValue","newValue","isEditing","wrapper","inputRef","isOutside","console","log","focus","handleClick","__returned__","v","Object","defineProperty","enumerable"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue?vue&type=script&setup=true&lang=ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { ref, watch, nextTick } from 'vue'\r\nimport useKeyPress from '../hooks/useKeyPress'\r\nimport useClickOutside from '../hooks/useClickOutside'\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'InlineEdit',\n  props: {\r\n  value: {\r\n    type: String,\r\n    request: true\r\n  }\r\n},\n  emits: ['change'],\n  setup(__props, { expose, emit }) {\n  expose();\n\nconst props = __props;\n\r\n\r\nlet cacheOldValue: string | undefined = ''\r\n\r\nconst innerValue = ref(props.value)\r\n// 属性更新时内部数据还是旧的\r\nwatch(() => props.value, (newValue) => {\r\n  // if (newValue) {\r\n  innerValue.value = newValue\r\n  // }\r\n})\r\nconst isEditing = ref<boolean>(false)\r\nconst wrapper = ref<null | HTMLElement>(null)\r\nconst inputRef = ref<null | HTMLElement>(null)\r\nconst isOutside = useClickOutside(wrapper)\r\nwatch(isOutside, (newValue) => {\r\n  console.log(isOutside.value,newValue)\r\n  if (newValue && isEditing.value) {\r\n    isEditing.value = false\r\n    emit('change', innerValue.value)\r\n  }\r\n  isOutside.value = false\r\n})\r\nwatch(isEditing, async (isEditing) => {\r\n  if (isEditing) {\r\n    cacheOldValue = innerValue.value\r\n    await nextTick()\r\n    if (inputRef.value) {\r\n      inputRef.value.focus()\r\n    }\r\n  }\r\n})\r\nconst handleClick = () => {\r\n  isEditing.value = true\r\n  console.log('点组件');\r\n  \r\n  /**\r\n   * 组件更新是异步的\r\n   */\r\n  // setTimeout(() => {\r\n  //   if (inputRef.value) {\r\n  //     inputRef.value.focus()\r\n  //   }\r\n  // }, 500);\r\n  \r\n}\r\nuseKeyPress('Enter', () => {\r\n  console.log('enter事件');\r\n  \r\n  if (isEditing.value) {\r\n    isEditing.value = false\r\n    emit('change', innerValue.value)\r\n  }\r\n})\r\nuseKeyPress('Escape', () => {\r\n  if (isEditing.value) {\r\n    isEditing.value = false\r\n    innerValue.value = cacheOldValue\r\n  }\r\n})\r\n\r\n\nconst __returned__ = { props, get cacheOldValue() { return cacheOldValue }, set cacheOldValue(v) { cacheOldValue = v }, emit, innerValue, isEditing, wrapper, inputRef, isOutside, handleClick }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})"]}]}