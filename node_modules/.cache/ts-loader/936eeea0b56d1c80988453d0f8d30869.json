{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\LayerList.vue?vue&type=script&setup=true&lang=ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\LayerList.vue","mtime":1678120006960},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1677514846241},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyByZWFjdGl2ZSwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgRXllT3V0bGluZWQsIEV5ZUludmlzaWJsZU91dGxpbmVkLCBMb2NrT3V0bGluZWQsIFVubG9ja091dGxpbmVkIH0gZnJvbSAnQGFudC1kZXNpZ24vaWNvbnMtdnVlJzsKaW1wb3J0IElubGluZUVkaXQgZnJvbSAnLi9JbmxpbmVFZGl0LnZ1ZSc7CmltcG9ydCB7IGdldFBhcmVudEVsZW1lbnQgfSBmcm9tICcuLi9oZWxwZXInOwovLyBpbXBvcnQgYXJyYXlNb3ZlIGZyb20gJ2FycmF5LW1vdmUnCmltcG9ydCB7IGFycmF5TW92ZUltbXV0YWJsZSB9IGZyb20gJ2FycmF5LW1vdmUnOwpleHBvcnQgZGVmYXVsdCAvKiNfX1BVUkVfXyovX2RlZmluZUNvbXBvbmVudCh7CiAgX19uYW1lOiAnTGF5ZXJMaXN0JywKICBwcm9wczogewogICAgbGlzdDogewogICAgICB0eXBlOiBBcnJheQogICAgfSwKICAgIHNlbGVjdGVkSWQ6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBlbWl0czogWydzZWxlY3QnLCAnY2hhbmdlJywgJ2Ryb3AnXSwKICBzZXR1cChfX3Byb3BzLCB7CiAgICBleHBvc2UsCiAgICBlbWl0CiAgfSkgewogICAgZXhwb3NlKCk7CiAgICBjb25zdCBwcm9wcyA9IF9fcHJvcHM7CiAgICBjb25zdCBhcnJMaXN0ID0gcmVmKHByb3BzLmxpc3QpOwogICAgbGV0IHN0YXJ0ID0gLTE7CiAgICBsZXQgZW5kID0gLTE7CiAgICBjb25zdCBkcmFnRGF0YSA9IHJlYWN0aXZlKHsKICAgICAgY3VycmVudERyYWdnaW5nOiAnJywKICAgICAgY3VycmVudEluZGV4OiAtMQogICAgfSk7CiAgICBjb25zdCBvbkRyYWdTdGFydCA9IChlLCBpZCwgaW5kZXgpID0+IHsKICAgICAgLy8g5Luj6KGo5q2j5Zyo5ouW5ou95YWD57SgCiAgICAgIGRyYWdEYXRhLmN1cnJlbnREcmFnZ2luZyA9IGlkOwogICAgICBkcmFnRGF0YS5jdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgc3RhcnQgPSBpbmRleDsKICAgIH07CiAgICBjb25zdCBvbkRyYWdFbnRlciA9IChlLCBpbmRleCkgPT4gewogICAgICAvLyBjb25zb2xlLmxvZygnZW50ZXInLCBpbmRleCk7CiAgICAgIGlmIChwcm9wcy5saXN0KSB7CiAgICAgICAgY29uc3QgYXJyID0gYXJyYXlNb3ZlSW1tdXRhYmxlKHByb3BzLmxpc3QsIGRyYWdEYXRhLmN1cnJlbnRJbmRleCwgaW5kZXgpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKGFycik7CiAgICAgICAgYXJyTGlzdC52YWx1ZSA9IGFycjsKICAgICAgfQogICAgICBkcmFnRGF0YS5jdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgZW5kID0gaW5kZXg7CiAgICB9OwogICAgY29uc3Qgb25Ecm9wID0gZSA9PiB7CiAgICAgIC8vIGNvbnN0IGN1cnJlbnRFbGVtZW50ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQKICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPSBnZXRQYXJlbnRFbGVtZW50KGUudGFyZ2V0LCAnYW50LWxpc3QtaXRlbScpOwogICAgICBpZiAoY3VycmVudEVsZW1lbnQgJiYgY3VycmVudEVsZW1lbnQuZGF0YXNldC5pbmRleCkgewogICAgICAgIGNvbnN0IG1vdmVJbmRleCA9IHBhcnNlSW50KGN1cnJlbnRFbGVtZW50LmRhdGFzZXQuaW5kZXgpOwogICAgICAgIGNvbnNvbGUubG9nKG1vdmVJbmRleCk7CiAgICAgICAgaWYgKHByb3BzLmxpc3QpIHsKICAgICAgICAgIGNvbnN0IGFyciA9IGFycmF5TW92ZUltbXV0YWJsZShwcm9wcy5saXN0LCBkcmFnRGF0YS5jdXJyZW50SW5kZXgsIG1vdmVJbmRleCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhcnIpOwogICAgICAgICAgYXJyTGlzdC52YWx1ZSA9IGFycjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZW1pdCgnZHJvcCcsIHsKICAgICAgICBzdGFydCwKICAgICAgICBlbmQKICAgICAgfSk7CiAgICAgIGRyYWdEYXRhLmN1cnJlbnREcmFnZ2luZyA9ICcnOwogICAgfTsKICAgIGNvbnN0IG9uZHJhZ292ZXIgPSBlID0+IHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgfTsKICAgIC8vIGNvbnN0IGlzQWN0aXZlID0gcmVmKGZhbHNlKQogICAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoaWQsIGtleSwgdmFsdWUpID0+IHsKICAgICAgY29uc29sZS5sb2coJ3ZhbHVlJywgdmFsdWUpOwogICAgICBjb25zdCBkYXRhID0gewogICAgICAgIGlkLAogICAgICAgIGtleSwKICAgICAgICB2YWx1ZSwKICAgICAgICBpc1Jvb3Q6IHRydWUKICAgICAgfTsKICAgICAgZW1pdCgnY2hhbmdlJywgZGF0YSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlU2VsZWN0ID0gaWQgPT4gewogICAgICBlbWl0KCdzZWxlY3QnLCBpZCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gaW5uZXJWYWx1ZSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdpbm5lclZhbHVlJywgaW5uZXJWYWx1ZSk7CiAgICB9OwogICAgY29uc3QgX19yZXR1cm5lZF9fID0gewogICAgICBwcm9wcywKICAgICAgZW1pdCwKICAgICAgYXJyTGlzdCwKICAgICAgZ2V0IHN0YXJ0KCkgewogICAgICAgIHJldHVybiBzdGFydDsKICAgICAgfSwKICAgICAgc2V0IHN0YXJ0KHYpIHsKICAgICAgICBzdGFydCA9IHY7CiAgICAgIH0sCiAgICAgIGdldCBlbmQoKSB7CiAgICAgICAgcmV0dXJuIGVuZDsKICAgICAgfSwKICAgICAgc2V0IGVuZCh2KSB7CiAgICAgICAgZW5kID0gdjsKICAgICAgfSwKICAgICAgZHJhZ0RhdGEsCiAgICAgIG9uRHJhZ1N0YXJ0LAogICAgICBvbkRyYWdFbnRlciwKICAgICAgb25Ecm9wLAogICAgICBvbmRyYWdvdmVyLAogICAgICBoYW5kbGVDbGljaywKICAgICAgaGFuZGxlU2VsZWN0LAogICAgICBoYW5kbGVDaGFuZ2UsCiAgICAgIGdldCBFeWVPdXRsaW5lZCgpIHsKICAgICAgICByZXR1cm4gRXllT3V0bGluZWQ7CiAgICAgIH0sCiAgICAgIGdldCBFeWVJbnZpc2libGVPdXRsaW5lZCgpIHsKICAgICAgICByZXR1cm4gRXllSW52aXNpYmxlT3V0bGluZWQ7CiAgICAgIH0sCiAgICAgIGdldCBMb2NrT3V0bGluZWQoKSB7CiAgICAgICAgcmV0dXJuIExvY2tPdXRsaW5lZDsKICAgICAgfSwKICAgICAgZ2V0IFVubG9ja091dGxpbmVkKCkgewogICAgICAgIHJldHVybiBVbmxvY2tPdXRsaW5lZDsKICAgICAgfSwKICAgICAgSW5saW5lRWRpdAogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gX19yZXR1cm5lZF9fOwogIH0KfSk7"},{"version":3,"mappings":"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","names":["defineComponent","_defineComponent","reactive","ref","EyeOutlined","EyeInvisibleOutlined","LockOutlined","UnlockOutlined","InlineEdit","getParentElement","arrayMoveImmutable","__name","props","list","type","Array","selectedId","String","emits","setup","__props","expose","emit","arrList","start","end","dragData","currentDragging","currentIndex","onDragStart","e","id","index","onDragEnter","arr","value","onDrop","currentElement","target","dataset","moveIndex","parseInt","console","log","ondragover","preventDefault","handleClick","key","data","isRoot","handleSelect","handleChange","innerValue","__returned__","v","Object","defineProperty","enumerable"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\LayerList.vue?vue&type=script&setup=true&lang=ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { ComponentData } from '../store/editor'\r\nimport { reactive, PropType, ref } from 'vue'\r\nimport { EyeOutlined, EyeInvisibleOutlined, LockOutlined, UnlockOutlined } from '@ant-design/icons-vue'\r\nimport InlineEdit from './InlineEdit.vue'\r\nimport { getParentElement } from '../helper'\r\n// import arrayMove from 'array-move'\r\nimport {arrayMoveImmutable} from 'array-move'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'LayerList',\n  props: {\r\n  list: {\r\n    type: Array as PropType<ComponentData[]>\r\n  },\r\n  selectedId: {\r\n    type: String\r\n  }\r\n},\n  emits: ['select', 'change', 'drop'],\n  setup(__props, { expose, emit }) {\n  expose();\n\nconst props = __props;\n\r\n\r\n\r\nconst arrList = ref(props.list)\r\nlet start = -1\r\nlet end = -1\r\n\r\nconst dragData = reactive({\r\n  currentDragging: '',\r\n  currentIndex: -1\r\n})\r\nconst onDragStart = (e: DragEvent, id: string, index: number) => {\r\n  // 代表正在拖拽元素\r\n  dragData.currentDragging = id\r\n  dragData.currentIndex = index\r\n  start = index\r\n}\r\nconst onDragEnter = (e: DragEvent, index: number) => {\r\n  // console.log('enter', index);\r\n  if (props.list) {\r\n    const arr = arrayMoveImmutable(props.list, dragData.currentIndex, index)\r\n    // console.log(arr);\r\n    arrList.value = arr\r\n  } \r\n  dragData.currentIndex = index\r\n  end = index\r\n}\r\nconst onDrop = (e: DragEvent) => {\r\n  // const currentElement = e.target as HTMLElement\r\n  const currentElement = getParentElement(e.target as HTMLElement, 'ant-list-item')\r\n  if (currentElement && currentElement.dataset.index) {\r\n    const moveIndex = parseInt(currentElement.dataset.index)\r\n    console.log(moveIndex);\r\n    if (props.list) {\r\n      const arr = arrayMoveImmutable(props.list, dragData.currentIndex, moveIndex)\r\n      // console.log(arr);\r\n      arrList.value = arr\r\n    }\r\n  }\r\n  emit('drop', { start, end })\r\n  dragData.currentDragging = ''\r\n}\r\nconst ondragover = (e: DragEvent) => {\r\n  e.preventDefault()\r\n}\r\n\r\n// const isActive = ref(false)\r\nconst handleClick = (id: string, key: string, value: boolean) => {\r\n  console.log('value', value);\r\n  const data = {\r\n    id,\r\n    key,\r\n    value,\r\n    isRoot: true\r\n  }\r\n  emit('change', data)\r\n}\r\nconst handleSelect = (id: string) => {\r\n  emit('select', id)\r\n}\r\nconst handleChange = (innerValue: string) => {\r\n  console.log('innerValue', innerValue);\r\n  \r\n}\r\n\r\n\nconst __returned__ = { props, emit, arrList, get start() { return start }, set start(v) { start = v }, get end() { return end }, set end(v) { end = v }, dragData, onDragStart, onDragEnter, onDrop, ondragover, handleClick, handleSelect, handleChange, get EyeOutlined() { return EyeOutlined }, get EyeInvisibleOutlined() { return EyeInvisibleOutlined }, get LockOutlined() { return LockOutlined }, get UnlockOutlined() { return UnlockOutlined }, InlineEdit }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})"]}]}