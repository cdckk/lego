{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\helper.ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\helper.ts","mtime":1677334493853},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1674816650140},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js","mtime":1674816759137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWVzc2FnZSB9IGZyb20gJ2FudC1kZXNpZ24tdnVlJzsKZXhwb3J0IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZENoZWNrKGZpbGUsIGNvbmRpdGlvbikgewogIGNvbnN0IHsKICAgIGZvcm1hdCwKICAgIHNpemUKICB9ID0gY29uZGl0aW9uOwogIGNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmb3JtYXQgPyBmb3JtYXQuaW5jbHVkZXMoZmlsZS50eXBlKSA6IHRydWU7CiAgLy8gY29uc3QgaXNWYWxpZFNpemUgPSBzaXplID8gKGZpbGUuc2l6ZSAvIDEwMjQgLzEwMjQgPCBzaXplKSA6IHRydWUKICBjb25zdCBpc1ZhbGlkU2l6ZSA9IHNpemUgPyBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IHNpemUgOiB0cnVlOwogIGxldCBlcnJvciA9IG51bGw7CiAgaWYgKCFpc1ZhbGlkRm9ybWF0KSB7CiAgICBlcnJvciA9ICdmb3JtYXQnOwogIH0KICBpZiAoIWlzVmFsaWRTaXplKSB7CiAgICBlcnJvciA9ICdzaXplJzsKICB9CiAgcmV0dXJuIHsKICAgIHBhc3NlZDogaXNWYWxpZFNpemUgJiYgaXNWYWxpZFNpemUsCiAgICBlcnJvcgogIH07Cn0KZXhwb3J0IGNvbnN0IGNvbW1vblVwbG9hZENoZWNrID0gZmlsZSA9PiB7CiAgY29uc3QgcmVzdWx0ID0gYmVmb3JlVXBsb2FkQ2hlY2soZmlsZSwgewogICAgZm9ybWF0OiBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJ10sCiAgICBzaXplOiAxCiAgfSk7CiAgY29uc3QgewogICAgcGFzc2VkLAogICAgZXJyb3IKICB9ID0gcmVzdWx0OwogIGlmIChlcnJvciA9PT0gJ2Zvcm1hdCcpIHsKICAgIG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWbvueJh+WPquiDveaYr0pQRy9QTkfmoLzlvI/vvIEnKTsKICB9CiAgaWYgKGVycm9yID09PSAnc2l6ZScpIHsKICAgIG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWbvueJh+Wkp+Wwj+S4jeiDvei2hei/hzFNYicpOwogIH0KICByZXR1cm4gcGFzc2VkOwp9Ow=="},{"version":3,"mappings":"AAAA,SAASA,OAAO,QAAQ,gBAAgB;AAUxC,OAAM,SAAUC,iBAAiB,CAACC,IAAU,EAAEC,SAAyB;EACrE,MAAM;IAACC,MAAM;IAAEC;EAAI,CAAC,GAAGF,SAAS;EAChC,MAAMG,aAAa,GAAGF,MAAM,GAAGA,MAAM,CAACG,QAAQ,CAACL,IAAI,CAACM,IAAI,CAAC,GAAG,IAAI;EAChE;EACA,MAAMC,WAAW,GAAGJ,IAAI,GAAIH,IAAI,CAACG,IAAI,GAAG,IAAI,GAAE,IAAI,GAAGA,IAAI,GAAI,IAAI;EACjE,IAAIK,KAAK,GAAc,IAAI;EAC3B,IAAI,CAACJ,aAAa,EAAE;IAClBI,KAAK,GAAG,QAAQ;;EAElB,IAAI,CAACD,WAAW,EAAE;IAChBC,KAAK,GAAG,MAAM;;EAEhB,OAAO;IACLC,MAAM,EAAEF,WAAW,IAAIA,WAAW;IAClCC;GACD;AACH;AAEA,OAAO,MAAME,iBAAiB,GAAIV,IAAU,IAAI;EAC9C,MAAMW,MAAM,GAAGZ,iBAAiB,CAACC,IAAI,EAAE;IAAEE,MAAM,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC;IAAEC,IAAI,EAAE;EAAC,CAAC,CAAC;EACvF,MAAM;IAAEM,MAAM;IAAED;EAAK,CAAE,GAAGG,MAAM;EAChC,IAAIH,KAAK,KAAK,QAAQ,EAAE;IACtBV,OAAO,CAACU,KAAK,CAAC,mBAAmB,CAAC;;EAEpC,IAAIA,KAAK,KAAK,MAAM,EAAE;IACpBV,OAAO,CAACU,KAAK,CAAC,eAAe,CAAC;;EAEhC,OAAOC,MAAM;AACf,CAAC","names":["message","beforeUploadCheck","file","condition","format","size","isValidFormat","includes","type","isValidSize","error","passed","commonUploadCheck","result"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\helper.ts"],"sourcesContent":["import { message } from 'ant-design-vue'\r\n\r\nexport interface CheckCondition {\r\n format: string[];\r\n//  使用多少M为单位\r\n size: number;\r\n}\r\n\r\ntype ErrorType = 'size' | 'format' | null\r\n\r\nexport function beforeUploadCheck(file: File, condition: CheckCondition) {\r\n  const {format, size} = condition\r\n  const isValidFormat = format ? format.includes(file.type) : true\r\n  // const isValidSize = size ? (file.size / 1024 /1024 < size) : true\r\n  const isValidSize = size ? (file.size / 1024 /1024 < size) : true\r\n  let error: ErrorType = null\r\n  if (!isValidFormat) {\r\n    error = 'format'\r\n  }\r\n  if (!isValidSize) {\r\n    error = 'size'\r\n  }\r\n  return {\r\n    passed: isValidSize && isValidSize,\r\n    error\r\n  }\r\n}\r\n\r\nexport const commonUploadCheck = (file: File) => {\r\n  const result = beforeUploadCheck(file, { format: ['image/jpeg', 'image/png'], size: 1})\r\n  const { passed, error } = result\r\n  if (error === 'format') {\r\n    message.error('上传图片只能是JPG/PNG格式！')\r\n  }\r\n  if (error === 'size') {\r\n    message.error('上传图片大小不能超过1Mb')\r\n  }\r\n  return passed\r\n}"]}]}