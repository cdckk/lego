{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\EditorWrapper.vue?vue&type=script&setup=true&lang=ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\EditorWrapper.vue","mtime":1679456028940},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1679070494323},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBjb21wdXRlZCwgcmVmLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHBpY2sgfSBmcm9tICdsb2Rhc2gtZXMnOwpleHBvcnQgZGVmYXVsdCAvKiNfX1BVUkVfXyovX2RlZmluZUNvbXBvbmVudCh7CiAgX19uYW1lOiAnRWRpdG9yV3JhcHBlcicsCiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBhY3RpdmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBwcm9wczogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGVtaXRzOiBbJ3NldEFjdGl2ZScsICd1cGRhdGUtcG9zaXRpb24nXSwKICBzZXR1cChfX3Byb3BzLCB7CiAgICBleHBvc2UsCiAgICBlbWl0CiAgfSkgewogICAgZXhwb3NlKCk7CiAgICBjb25zdCBwcm9wcyA9IF9fcHJvcHM7CiAgICAvLyDnm5LlhoXpvKDmoIfliLDnm5LlrZDovrnmoYbnmoTot53nprsKICAgIGNvbnN0IGdhcCA9IHsKICAgICAgeDogMCwKICAgICAgeTogMAogICAgfTsKICAgIGxldCBpc01vdmluZyA9IGZhbHNlOwogICAgY29uc3QgZWRpdG9yV3JhcHBlciA9IHJlZihudWxsKTsKICAgIC8vIGNvbnNvbGUubG9nKGVkaXRvcldyYXBwZXIudmFsdWUpCiAgICBjb25zdCB3cmFwcGVyU3R5bGUgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiBwaWNrKHByb3BzLnByb3BzLCBbJ3RvcCcsICdsZWZ0JywgJ3dpZHRoJywgJ2hlaWdodCddKTsKICAgIH0pOwogICAgY29uc3QgY2FsY01vdmVQb3NpdGlvbiA9IGUgPT4gewogICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcy1hcmVhJyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdjb250YWluZXIub2Zmc2V0TGVmdCcsIGNvbnRhaW5lci5vZmZzZXRMZWZ0KTsKICAgICAgLy8gY29uc29sZS5sb2coJ2NvbnRhaW5lci5vZmZzZXRUb3AnLCBjb250YWluZXIub2Zmc2V0VG9wKTsKICAgICAgY29uc3QgbGVmdCA9IGUuY2xpZW50WCAtIGdhcC54IC0gY29udGFpbmVyLm9mZnNldExlZnQ7CiAgICAgIGNvbnN0IHRvcCA9IGUuY2xpZW50WSAtIGdhcC55IC0gY29udGFpbmVyLm9mZnNldFRvcDsKICAgICAgcmV0dXJuIHsKICAgICAgICBsZWZ0LAogICAgICAgIHRvcAogICAgICB9OwogICAgfTsKICAgIGNvbnN0IHN0YXJ0TW92ZSA9IGUgPT4gewogICAgICBpc01vdmluZyA9IHRydWU7CiAgICAgIGNvbnN0IGN1cnJlbnRFbGVtZW50ID0gZWRpdG9yV3JhcHBlci52YWx1ZTsKICAgICAgaWYgKGVkaXRvcldyYXBwZXIudmFsdWUpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhlZGl0b3JXcmFwcGVyLnZhbHVlPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkKICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QKICAgICAgICBjb25zdCB7CiAgICAgICAgICBsZWZ0LAogICAgICAgICAgdG9wCiAgICAgICAgfSA9IGVkaXRvcldyYXBwZXIudmFsdWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgZ2FwLnggPSBlLmNsaWVudFggLSBsZWZ0OwogICAgICAgIC8vIOm8oOagh+WIsOinhuWPo+eahOi3neemu2UuY2xpZW50WAogICAgICAgIGdhcC55ID0gZS5jbGllbnRZIC0gdG9wOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCdnYXAnLCBnYXApOwogICAgICB9CgogICAgICBjb25zdCBoYW5kbGVNb3ZlID0gZSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgbGVmdCwKICAgICAgICAgIHRvcAogICAgICAgIH0gPSBjYWxjTW92ZVBvc2l0aW9uKGUpOwogICAgICAgIGNvbnNvbGUubG9nKGxlZnQsIHRvcCk7CiAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7CiAgICAgICAgICBjdXJyZW50RWxlbWVudC5zdHlsZS50b3AgPSB0b3AgKyAncHgnOwogICAgICAgICAgY3VycmVudEVsZW1lbnQuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnOwogICAgICAgICAgbmV4dFRpY2soKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRFbGVtZW50LnN0eWxlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSBlID0+IHsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3ZlKTsKICAgICAgICBpZiAoaXNNb3ZpbmcpIHsKICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgdG9wLAogICAgICAgICAgICBsZWZ0CiAgICAgICAgICB9ID0gY2FsY01vdmVQb3NpdGlvbihlKTsKICAgICAgICAgIGVtaXQoJ3VwZGF0ZS1wb3NpdGlvbicsIHsKICAgICAgICAgICAgdG9wLAogICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICBpZDogcHJvcHMuaWQKICAgICAgICAgIH0pOwogICAgICAgICAgaXNNb3ZpbmcgPSBmYWxzZTsKICAgICAgICAgIG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3ZlKTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApOwogICAgfTsKICAgIGNvbnN0IG9uSXRlbUNsaWNrID0gKCkgPT4gewogICAgICBlbWl0KCdzZXRBY3RpdmUnLCBwcm9wcy5pZCk7CiAgICB9OwogICAgY29uc3QgX19yZXR1cm5lZF9fID0gewogICAgICBwcm9wcywKICAgICAgZW1pdCwKICAgICAgZ2FwLAogICAgICBnZXQgaXNNb3ZpbmcoKSB7CiAgICAgICAgcmV0dXJuIGlzTW92aW5nOwogICAgICB9LAogICAgICBzZXQgaXNNb3ZpbmcodikgewogICAgICAgIGlzTW92aW5nID0gdjsKICAgICAgfSwKICAgICAgZWRpdG9yV3JhcHBlciwKICAgICAgd3JhcHBlclN0eWxlLAogICAgICBjYWxjTW92ZVBvc2l0aW9uLAogICAgICBzdGFydE1vdmUsCiAgICAgIG9uSXRlbUNsaWNrCiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fcmV0dXJuZWRfXywgJ19faXNTY3JpcHRTZXR1cCcsIHsKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiBfX3JldHVybmVkX187CiAgfQp9KTs="},{"version":3,"mappings":"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","names":["defineComponent","_defineComponent","computed","ref","nextTick","pick","__name","props","id","type","String","required","active","Boolean","default","Object","emits","setup","__props","expose","emit","gap","x","y","isMoving","editorWrapper","wrapperStyle","calcMovePosition","e","container","document","getElementById","left","clientX","offsetLeft","top","clientY","offsetTop","startMove","currentElement","value","getBoundingClientRect","handleMove","console","log","style","handleMouseUp","removeEventListener","addEventListener","onItemClick","__returned__","v","defineProperty","enumerable"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\EditorWrapper.vue?vue&type=script&setup=true&lang=ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { computed, ref, nextTick } from 'vue'\r\nimport { pick } from 'lodash-es'\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'EditorWrapper',\n  props: {\r\n  id: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  active: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  props: {\r\n    type: Object\r\n  }\r\n},\n  emits: ['setActive', 'update-position'],\n  setup(__props, { expose, emit }) {\n  expose();\n\nconst props = __props;\n\r\n\r\n\r\n\r\n// 盒内鼠标到盒子边框的距离\r\nconst gap = {\r\n  x: 0,\r\n  y: 0\r\n}\r\n\r\nlet isMoving = false\r\n\r\nconst editorWrapper = ref<null | HTMLElement>(null)\r\n// console.log(editorWrapper.value)\r\n\r\n\r\nconst wrapperStyle = computed(() => {\r\n  return pick(props.props, [ 'top','left', 'width', 'height'])\r\n})\r\n\r\nconst calcMovePosition = (e: MouseEvent) => {\r\n  // console.log(e);\r\n  const container = document.getElementById('canvas-area') as HTMLElement\r\n  // console.log('container.offsetLeft', container.offsetLeft);\r\n  // console.log('container.offsetTop', container.offsetTop);\r\n  \r\n  const left = e.clientX - gap.x - container.offsetLeft\r\n  const top = e.clientY - gap.y - container.offsetTop\r\n  return {\r\n    left,\r\n    top\r\n  }\r\n}\r\nconst startMove = (e: MouseEvent) => {\r\n  isMoving = true\r\n  const currentElement = editorWrapper.value\r\n  if (editorWrapper.value) {\r\n    // console.log(editorWrapper.value?.getBoundingClientRect())\r\n    // console.log(e);\r\n    // getBoundingClientRect\r\n    const { left, top } = editorWrapper.value.getBoundingClientRect()\r\n    gap.x = e.clientX - left\r\n    // 鼠标到视口的距离e.clientX\r\n    gap.y = e.clientY - top\r\n    // console.log('gap', gap);\r\n  }\r\n  const handleMove = (e: MouseEvent) => {\r\n    const { left, top } = calcMovePosition(e)\r\n    console.log(left, top);\r\n    if (currentElement) {\r\n      currentElement.style.top = top + 'px'\r\n      currentElement.style.left = left + 'px'\r\n      nextTick()\r\n      console.log(currentElement.style);\r\n    }\r\n    \r\n    \r\n  }\r\n  const handleMouseUp = (e) => {\r\n    document.removeEventListener('mousemove', handleMove)\r\n    if (isMoving) {\r\n      const { top, left } = calcMovePosition(e)\r\n      emit('update-position', { top, left, id: props.id })\r\n      isMoving = false\r\n      nextTick(() => {\r\n        document.removeEventListener('mouseup', handleMouseUp)\r\n      })\r\n    }\r\n  }\r\n  document.addEventListener('mousemove', handleMove)\r\n  document.addEventListener('mouseup', handleMouseUp)\r\n}\r\n\r\nconst onItemClick = () => {\r\n  emit('setActive', props.id)\r\n}\r\n\nconst __returned__ = { props, emit, gap, get isMoving() { return isMoving }, set isMoving(v) { isMoving = v }, editorWrapper, wrapperStyle, calcMovePosition, startMove, onItemClick }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})"]}]}