{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\store\\editor.ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\store\\editor.ts","mtime":1679742720714},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1679070494323},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js","mtime":1674816759137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICcuL2luZGV4JzsKaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7CmltcG9ydCB7IHRleHREZWZhdWx0UHJvcHMgfSBmcm9tICcuLi9kZWZhdWx0UHJvcHMnOwppbXBvcnQgeyBtZXNzYWdlIH0gZnJvbSAnYW50LWRlc2lnbi12dWUnOwppbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gtZXMnOwpleHBvcnQgY29uc3QgdGVzdENvbXBvbmVudHMgPSBbewogIGlkOiB1dWlkdjQoKSwKICBuYW1lOiAnTFRleHQnLAogIGxheWVyTmFtZTogJ+WbvuWxgjEnLAogIGlzTG9ja2VkOiBmYWxzZSwKICBpc0hpZGRlbjogdHJ1ZSwKICBwcm9wczogewogICAgLi4udGV4dERlZmF1bHRQcm9wcywKICAgIHRleHQ6ICdoZWxsbycsCiAgICBmb250U2l6ZTogJzUwcHgnLAogICAgY29sb3I6ICdyZWQnLAogICAgbGluZUhlaWdodDogJzEnLAogICAgdGV4dEFsaWduOiAnbGVmdCcsCiAgICBmb250RmFtaWx5OiAnJywKICAgIHdpZHRoOiAnMTAwcHgnLAogICAgaGVpZ2h0OiAnMTAwcHgnLAogICAgYmFja2dyb3VuZENvbG9yOiAnI2VmZWZlZicsCiAgICBsZWZ0OiAnMTBweCcsCiAgICB0b3A6ICcxMHB4JywKICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnCiAgfQp9Ci8vIHsgaWQ6IHV1aWR2NCgpLCBuYW1lOiAnTFRleHQnLCBsYXllck5hbWU6ICflm77lsYIxJywgaXNMb2NrZWQ6IGZhbHNlLCBpc0hpZGRlbjogdHJ1ZSwgcHJvcHM6IHsgLi4udGV4dERlZmF1bHRQcm9wcywgdGV4dDogJ2hlbGxvJywgZm9udFNpemU6ICc1MHB4JywgY29sb3I6ICdyZWQnLCBsaW5lSGVpZ2h0OiAnMScsIHRleHRBbGlnbjogJ2xlZnQnLCBmb250RmFtaWx5OiAnJ319LAovLyB7IGlkOiB1dWlkdjQoKSwgbmFtZTogJ0xUZXh0JywgbGF5ZXJOYW1lOiAn5Zu+5bGCMicsIGlzTG9ja2VkOiBmYWxzZSwgaXNIaWRkZW46IHRydWUsIHByb3BzOiB7IC4uLnRleHREZWZhdWx0UHJvcHMsIHRleHQ6ICdoZWxsbzInLCBmb250U2l6ZTogJzI1cHgnLCBsaW5lSGVpZ2h0OiAnMScsIHRleHRBbGlnbjogJ2xlZnQnIH19LAovLyB7IGlkOiB1dWlkdjQoKSwgbmFtZTogJ0xUZXh0JywgbGF5ZXJOYW1lOiAn5Zu+5bGCMycsIGlzTG9ja2VkOiBmYWxzZSwgaXNIaWRkZW46IHRydWUsIHByb3BzOiB7IC4uLnRleHREZWZhdWx0UHJvcHMsIHRleHQ6ICdoZWxsbzMnLCBmb250U2l6ZTogJzE1cHgnLCBhY3Rpb25UeXBlOiAndXJsJywgdXJsOiAnaHR0cHM6Ly93d3cuYmFpZHUuY29tLycsIHRleHRBbGlnbjogJ2xlZnQnIH19Cl07CgpleHBvcnQgY29uc3QgcGFnZURlZmF1bHRQcm9wcyA9IHsKICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJywKICBiYWNrZ3JvdW5kSW1hZ2U6ICcnLAogIGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnLAogIGJhY2tncm91bmRTaXplOiAnY292ZXInLAogIGhlaWdodDogJzU2MHB4Jwp9Owpjb25zdCBlZGl0b3IgPSB7CiAgc3RhdGU6IHsKICAgIGNvbXBvbmVudHM6IHRlc3RDb21wb25lbnRzLAogICAgY3VycmVudEVsZW1lbnQ6ICcnLAogICAgcGFnZTogewogICAgICBwcm9wczogcGFnZURlZmF1bHRQcm9wcywKICAgICAgdGl0bGU6ICd0ZXN0IHRpdGxlJwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBhZGRDb21wb25lbnQoc3RhdGUsIHByb3BzKSB7CiAgICAgIC8vIGFkZENvbXBvbmVudChzdGF0ZSwgY29tcG9uZW50OiBDb21wb25lbnREYXRhKSB7CiAgICAgIC8vIGNvbnN0IG5ld0NvbXBvbmVudDogQ29tcG9uZW50RGF0YSA9IHsgaWQ6IHV1aWR2NCgpLCBuYW1lOiAnTFRleHQnLCBwcm9wcyB9CiAgICAgIC8vIHN0YXRlLmNvbXBvbmVudHMucHVzaChuZXdDb21wb25lbnQpCiAgICAgIC8vIHByb3BzLmhhc093blByb3BlcnR5LmNhbGwoJ3RleHQnKQogICAgICBpZiAoJ3RleHQnIGluIHByb3BzKSB7CiAgICAgICAgY29uc3QgbmV3Q29tcG9uZW50ID0gewogICAgICAgICAgaWQ6IHV1aWR2NCgpLAogICAgICAgICAgbmFtZTogJ0xUZXh0JywKICAgICAgICAgIHByb3BzCiAgICAgICAgfTsKICAgICAgICBuZXdDb21wb25lbnQubGF5ZXJOYW1lID0gJ+WbvuWxgicgKyBzdGF0ZS5jb21wb25lbnRzOwogICAgICAgIHN0YXRlLmNvbXBvbmVudHMucHVzaChuZXdDb21wb25lbnQpOwogICAgICB9IGVsc2UgaWYgKCdzcmMnIGluIHByb3BzKSB7CiAgICAgICAgY29uc3QgbmV3Q29tcG9uZW50ID0gewogICAgICAgICAgaWQ6IHV1aWR2NCgpLAogICAgICAgICAgbmFtZTogJ0xJbWFnZScsCiAgICAgICAgICBwcm9wcwogICAgICAgIH07CiAgICAgICAgc3RhdGUuY29tcG9uZW50cy5wdXNoKG5ld0NvbXBvbmVudCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVDb21wb25lbnQoc3RhdGUsIHByb3BzKSB7CiAgICAgIC8qKg0KICAgICAgICog5Yig6Zmk5pWw57uE5Lit5oyH5a6a5pWw57uE5a+56LGhDQogICAgICAgKi8KICAgICAgc3RhdGUuY29tcG9uZW50cy5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyKSA9PiB7CiAgICAgICAgLy8gaWYoaXRlbS5wcm9wcy50ZXh0ID09PSBwcm9wcy50ZXh0KSB7CiAgICAgICAgLy8gICBhcnIuc3BsaWNlKGluZGV4LCAxKQogICAgICAgIC8vIH0KICAgICAgICBpZiAoaXRlbS5pZCA9PT0gcHJvcHMpIHsKICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTlm77lsYLmiJDlip8nLCAxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXJyLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOWbvuWxguaIkOWKnycpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2V0QWN0aXZlKHN0YXRlLCBjdXJyZW50SWQpIHsKICAgICAgc3RhdGUuY3VycmVudEVsZW1lbnQgPSBjdXJyZW50SWQ7CiAgICB9LAogICAgdXBkYXRlQ29tcG9uZW50KHN0YXRlLCB7CiAgICAgIGtleSwKICAgICAgdmFsdWUsCiAgICAgIGlkLAogICAgICBpc1Jvb3QKICAgIH0pIHsKICAgICAgLy8gdXBkYXRlQ29tcG9uZW505piv5a+5c3RhdGUuY29tcG9uZW50c+eahOW8leeUqAogICAgICBjb25zdCB1cGRhdGVDb21wb25lbnQgPSBzdGF0ZS5jb21wb25lbnRzLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSAoaWQgfHwgc3RhdGUuY3VycmVudEVsZW1lbnQpKTsKICAgICAgaWYgKHVwZGF0ZUNvbXBvbmVudCkgewogICAgICAgIGlmIChpc1Jvb3QpIHsKICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFtrZXldID0gdmFsdWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOmcgOimgeS4gOS4quWxnuaAp+adpeWGs+WumuS/ruaUuXByb3Bz6L+Y5piv5LiA57qn5bGe5oCnCiAgICAgICAgICB1cGRhdGVDb21wb25lbnQucHJvcHNba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNvcHlDb21wb25lbnQoc3RhdGUsIGlkKSB7CiAgICAgIC8vIGNvbnN0IGN1cnJlbnRDb21wb25lbnQgPSBzdGF0ZS5jb21wb25lbnRzLmZpbmQoKGNvbXBvbmVudCkgPT4gY29tcG9uZW50LmlkID09PSBpZCkKICAgICAgY29uc3QgY3VycmVudENvbXBvbmVudCA9IHN0b3JlLmdldHRlcnMuZ2V0RWxlbWVudChpZCk7CiAgICAgIGlmIChjdXJyZW50Q29tcG9uZW50KSB7CiAgICAgICAgc3RhdGUuY29weUNvbXBvbmVudCA9IGN1cnJlbnRDb21wb25lbnQ7CiAgICAgICAgbWVzc2FnZS5zdWNjZXNzKCflt7Lnu4/mi7fotJ3lvZPliY3lm77lsYInKTsKICAgICAgfQogICAgfSwKICAgIHBhc3RlQ29tcG9uZW50KHN0YXRlLCBpZCkgewogICAgICBpZiAoc3RhdGUuY29weUNvbXBvbmVudCkgewogICAgICAgIC8vIHN0YXRlLmNvbXBvbmVudHMucHVzaCguLi5zdGF0ZS5jb3B5Q29tcG9uZW50KQogICAgICAgIGNvbnN0IGNsb25lID0gY2xvbmVEZWVwKHN0YXRlLmNvcHlDb21wb25lbnQpOwogICAgICAgIGNsb25lLmlkID0gdXVpZHY0KCk7CiAgICAgICAgY2xvbmUubGF5ZXJOYW1lID0gY2xvbmUubGF5ZXJOYW1lICsgJ+WJr+acrCc7CiAgICAgICAgc3RhdGUuY29tcG9uZW50cy5wdXNoKGNsb25lKTsKICAgICAgfQogICAgfSwKICAgIG1vdmVDb21wb25lbnQoc3RhdGUsIGRhdGEpIHsKICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPSBzdG9yZS5nZXR0ZXJzLmdldEVsZW1lbnQoZGF0YS5pZCk7CiAgICAgIGlmIChjdXJyZW50RWxlbWVudCkgewogICAgICAgIC8qKg0KICAgICAgICAgKiDmlbDmja7ov5DnrpfopoHnu5/kuIDnsbvlnovvvIzlkKbliJnkvJrov5Tlm55OYU4NCiAgICAgICAgICovCiAgICAgICAgY29uc3Qgb2xkVG9wID0gcGFyc2VJbnQoY3VycmVudEVsZW1lbnQucHJvcHMudG9wKTsKICAgICAgICAvLyBjb25zdCBvbGRUb3AgPSBjdXJyZW50RWxlbWVudC5wcm9wcy50b3AKICAgICAgICBzd2l0Y2ggKGRhdGEuZGlyZWN0aW9uKSB7CiAgICAgICAgICBjYXNlICd1cCc6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb25zdCBuZXdUb3AgPSBvbGRUb3AgLSBkYXRhLmFtb3VudCArICdweCc7CiAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCd1cGRhdGVDb21wb25lbnQnLCB7CiAgICAgICAgICAgICAgICBrZXk6ICd0b3AnLAogICAgICAgICAgICAgICAgdmFsdWU6IG5ld1RvcCwKICAgICAgICAgICAgICAgIGlkOiBkYXRhLmlkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgZ2V0Q3VycmVudEVsZW1lbnQ6IHN0YXRlID0+IHsKICAgICAgcmV0dXJuIHN0YXRlLmNvbXBvbmVudHMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IHN0YXRlLmN1cnJlbnRFbGVtZW50KTsKICAgIH0sCiAgICAvKioNCiAgICAgKg0KICAgICAqIEBwYXJhbSBzdGF0ZSDpgLvovpHlpI3nlKgNCiAgICAgKiBAcmV0dXJucw0KICAgICAqLwogICAgZ2V0RWxlbWVudDogc3RhdGUgPT4gaWQgPT4gewogICAgICAvLyDlkI7pnaLlhpnlk6XmiJbov5DnrpfnrKblj6/ku6Xlj5bku6PnrKzkuIDkuKpnZXR0ZXJzCiAgICAgIHJldHVybiBzdGF0ZS5jb21wb25lbnRzLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBpZCB8fCBzdGF0ZS5jdXJyZW50RWxlbWVudCk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBlZGl0b3I7"},{"version":3,"mappings":"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","names":["store","v4","uuidv4","textDefaultProps","message","cloneDeep","testComponents","id","name","layerName","isLocked","isHidden","props","text","fontSize","color","lineHeight","textAlign","fontFamily","width","height","backgroundColor","left","top","position","pageDefaultProps","backgroundImage","backgroundRepeat","backgroundSize","editor","state","components","currentElement","page","title","mutations","addComponent","newComponent","push","deleteComponent","forEach","item","index","arr","splice","success","setActive","currentId","updateComponent","key","value","isRoot","find","copyComponent","currentComponent","getters","getElement","pasteComponent","clone","moveComponent","data","oldTop","parseInt","direction","newTop","amount","commit","getCurrentElement"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\store\\editor.ts"],"sourcesContent":["import { Module } from 'vuex'\r\nimport store, { GlobalDataProps } from './index'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport { TextComponentProps, textDefaultProps, imageDefaultProps } from '../defaultProps'\r\nimport { ImageComponentProps } from '../defaultProps'\r\nimport { AllComponentProps } from 'lego-bricks'\r\nimport { message } from 'ant-design-vue'\r\nimport { cloneDeep } from 'lodash-es'\r\n\r\nexport interface ComponentData {\r\n  // props: { [key: string]: any };\r\n  props: Partial<TextComponentProps & ImageComponentProps>;\r\n  id: string;\r\n  // name: string;\r\n  // 业务组件的名称\r\n  name: 'LText' | 'LImage' | 'LShape';\r\n  isHidden?: boolean;\r\n  isLocked?: boolean;\r\n  layerName?: string;\r\n}\r\n\r\nexport interface EditorProps {\r\n  components: ComponentData[];\r\n  currentElement: string;\r\n  page: PageData;\r\n  copyComponent?: ComponentData;\r\n}\r\n\r\nexport interface PageProps {\r\n  backgroundColor: string;\r\n  backgroundImage: string;\r\n  backgroundRepeat: string;\r\n  backgroundSize: string;\r\n  height: string;\r\n}\r\n\r\nexport type AllFormProps = PageProps & AllComponentProps\r\n\r\nexport interface PageData {\r\n  props: PageProps;\r\n  title: string;\r\n}\r\n\r\nexport const testComponents: ComponentData[] = [\r\n  { id: uuidv4(), name: 'LText', layerName: '图层1', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello', fontSize: '50px', color: 'red', lineHeight: '1', textAlign: 'left', fontFamily: '', width: '100px', height: '100px', backgroundColor: '#efefef', left: '10px', top: '10px', position: 'absolute'}},\r\n  // { id: uuidv4(), name: 'LText', layerName: '图层1', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello', fontSize: '50px', color: 'red', lineHeight: '1', textAlign: 'left', fontFamily: ''}},\r\n  // { id: uuidv4(), name: 'LText', layerName: '图层2', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello2', fontSize: '25px', lineHeight: '1', textAlign: 'left' }},\r\n  // { id: uuidv4(), name: 'LText', layerName: '图层3', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello3', fontSize: '15px', actionType: 'url', url: 'https://www.baidu.com/', textAlign: 'left' }}\r\n]\r\n\r\nexport const pageDefaultProps = {\r\n  backgroundColor: '#ffffff',\r\n  backgroundImage: '',\r\n  backgroundRepeat: 'no-repeat',\r\n  backgroundSize: 'cover',\r\n  height: '560px'\r\n}\r\n\r\nconst editor: Module<EditorProps, GlobalDataProps> = {\r\n  state: {\r\n    components: testComponents,\r\n    currentElement: '',\r\n    page: {\r\n      props: pageDefaultProps,\r\n      title: 'test title'\r\n    }\r\n  },\r\n  mutations: {\r\n    addComponent(state, props: Partial<TextComponentProps | ImageComponentProps>) {\r\n    // addComponent(state, component: ComponentData) {\r\n      // const newComponent: ComponentData = { id: uuidv4(), name: 'LText', props }\r\n      // state.components.push(newComponent)\r\n      // props.hasOwnProperty.call('text')\r\n      if ('text' in props) {\r\n        const newComponent: ComponentData = { id: uuidv4(), name: 'LText', props }\r\n        newComponent.layerName = '图层' + state.components\r\n        state.components.push(newComponent)\r\n      } else if ('src' in props) {\r\n        const newComponent: ComponentData = { id: uuidv4(), name: 'LImage', props }\r\n        state.components.push(newComponent)\r\n      }\r\n    },\r\n    deleteComponent(state, props) {\r\n      /**\r\n       * 删除数组中指定数组对象\r\n       */\r\n      state.components.forEach((item, index, arr) => {\r\n        // if(item.props.text === props.text) {\r\n        //   arr.splice(index, 1)\r\n        // }\r\n        if (item.id === props) {\r\n          arr.splice(index, 1)\r\n          message.success('删除图层成功', 1)\r\n        } else {\r\n          arr.splice(index, 1)\r\n          message.success('删除图层成功')\r\n        }\r\n      })\r\n    },\r\n    setActive(state, currentId: string) {\r\n      state.currentElement = currentId\r\n    },\r\n    updateComponent(state, { key, value, id, isRoot }) {\r\n      // updateComponent是对state.components的引用\r\n      const updateComponent = state.components.find((item) => item.id === (id || state.currentElement))\r\n      if(updateComponent) { \r\n        if (isRoot) {\r\n          (updateComponent as any)[key] = value\r\n        } else {\r\n          // 需要一个属性来决定修改props还是一级属性\r\n          updateComponent.props[key as keyof TextComponentProps] = value\r\n        }\r\n      }\r\n    },\r\n    copyComponent(state, id) {\r\n      // const currentComponent = state.components.find((component) => component.id === id)\r\n      const currentComponent = store.getters.getElement(id)\r\n      if (currentComponent) {\r\n        state.copyComponent = currentComponent\r\n        message.success('已经拷贝当前图层')\r\n      }\r\n    },\r\n    pasteComponent(state, id) {\r\n      if (state.copyComponent) {\r\n        // state.components.push(...state.copyComponent)\r\n        const clone = cloneDeep(state.copyComponent)\r\n        clone.id = uuidv4()\r\n        clone.layerName = clone.layerName + '副本'\r\n        state.components.push(clone)\r\n      }\r\n    },\r\n    moveComponent(state, data: { direction: string; amount: number; id: string}) {\r\n      const currentElement = store.getters.getElement(data.id)\r\n      if (currentElement) {\r\n        /**\r\n         * 数据运算要统一类型，否则会返回NaN\r\n         */\r\n        const oldTop = parseInt(currentElement.props.top)\r\n        // const oldTop = currentElement.props.top\r\n        switch(data.direction) {          \r\n        case 'up': {\r\n          const newTop = oldTop - data.amount + 'px'\r\n          store.commit('updateComponent', { key: 'top', value: newTop, id: data.id })\r\n          break\r\n        }\r\n        default:\r\n          break\r\n        }\r\n      }\r\n    }\r\n  },\r\n  getters: {\r\n    getCurrentElement: (state) => {\r\n      return state.components.find((item) => item.id === state.currentElement)\r\n    },\r\n    /**\r\n     * \r\n     * @param state 逻辑复用\r\n     * @returns \r\n     */\r\n    getElement: (state) => (id: string) => {\r\n      // 后面写哥或运算符可以取代第一个getters\r\n      return state.components.find(item => item.id === id || state.currentElement)\r\n    }\r\n  }\r\n}\r\n\r\nexport default editor"]}]}