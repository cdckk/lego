{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\Uploader.vue?vue&type=script&setup=true&lang=ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\Uploader.vue","mtime":1676285651937},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1674816650140},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCBhcyBfZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgcmVmLCByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnOwpleHBvcnQgZGVmYXVsdCAvKiNfX1BVUkVfXyovX2RlZmluZUNvbXBvbmVudCh7CiAgX19uYW1lOiAnVXBsb2FkZXInLAogIHByb3BzOiB7CiAgICBhY3Rpb246IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBzZXR1cChfX3Byb3BzLCB7CiAgICBleHBvc2UKICB9KSB7CiAgICBleHBvc2UoKTsKICAgIGNvbnN0IHByb3BzID0gX19wcm9wczsKICAgIGNvbnN0IGZpbGVJbnB1dCA9IHJlZihudWxsKTsKICAgIGNvbnN0IGZpbGVTdGF0dXMgPSByZWYoJ3JlYWR5Jyk7CiAgICBjb25zdCB1cGxvYWRlZEZpbGVzID0gcmVmKFtdKTsKICAgIGNvbnN0IHRyaWdnZXJVcGxvYWRlciA9ICgpID0+IHsKICAgICAgaWYgKGZpbGVJbnB1dC52YWx1ZSkgewogICAgICAgIGZpbGVJbnB1dC52YWx1ZS5jbGljaygpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlRmlsZUNoYW5nZSA9IGUgPT4gewogICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDsKICAgICAgY29uc3QgZmlsZXMgPSB0YXJnZXQuZmlsZXM7CiAgICAgIGlmIChmaWxlcykgewogICAgICAgIGNvbnN0IHVwbG9hZGVkRmlsZSA9IGZpbGVzWzBdOwogICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgY29uc3QgZmlsZU9iaiA9IHJlYWN0aXZlKHsKICAgICAgICAgIHVpZDogdXVpZHY0KCksCiAgICAgICAgICBzaXplOiB1cGxvYWRlZEZpbGUuc2l6ZSwKICAgICAgICAgIG5hbWU6IHVwbG9hZGVkRmlsZS5uYW1lLAogICAgICAgICAgc3RhdHVzOiAnbG9hZGluZycsCiAgICAgICAgICByYXc6IHVwbG9hZGVkRmlsZQogICAgICAgIH0pOwogICAgICAgIHVwbG9hZGVkRmlsZXMudmFsdWUucHVzaChmaWxlT2JqKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQodXBsb2FkZWRGaWxlLm5hbWUsIHVwbG9hZGVkRmlsZSk7CiAgICAgICAgZmlsZVN0YXR1cy52YWx1ZSA9ICdsb2FkaW5nJzsKICAgICAgICBheGlvcy5wb3N0KHByb3BzLmFjdGlvbiwgZm9ybURhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgIGZpbGVTdGF0dXMudmFsdWUgPSAnc3VjY2Vzcyc7CiAgICAgICAgICBmaWxlT2JqLnN0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICBmaWxlU3RhdHVzLnZhbHVlID0gJ2Vycm9yJzsKICAgICAgICAgIGZpbGVPYmouc3RhdHVzID0gJ2Vycm9yJzsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IF9fcmV0dXJuZWRfXyA9IHsKICAgICAgcHJvcHMsCiAgICAgIGZpbGVJbnB1dCwKICAgICAgZmlsZVN0YXR1cywKICAgICAgdXBsb2FkZWRGaWxlcywKICAgICAgdHJpZ2dlclVwbG9hZGVyLAogICAgICBoYW5kbGVGaWxlQ2hhbmdlCiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fcmV0dXJuZWRfXywgJ19faXNTY3JpcHRTZXR1cCcsIHsKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiBfX3JldHVybmVkX187CiAgfQp9KTs="},{"version":3,"mappings":";AAAA,SAASA,eAAe,IAAIC,gBAAgB,QAAQ,KAAK;AACzD,SAASC,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,EAAE,IAAIC,MAAM,QAAO,MAAM;AAYlC,eAAe,aAAaL,gBAAgB,CAAC;EAC3CM,MAAM,EAAE,UAAU;EAClBC,KAAK,EAAE;IACPC,MAAM,EAAE;MACNC,IAAI,EAAEC;;GAET;EACCC,KAAK,CAACC,OAAO,EAAE;IAAEC;EAAM,CAAE;IACzBA,MAAM,EAAE;IAEV,MAAMN,KAAK,GAAGK,OAAO;IAIrB,MAAME,SAAS,GAAGb,GAAG,CAA0B,IAAI,CAAC;IACpD,MAAMc,UAAU,GAAGd,GAAG,CAAe,OAAO,CAAC;IAC7C,MAAMe,aAAa,GAAGf,GAAG,CAAe,EAAE,CAAC;IAE3C,MAAMgB,eAAe,GAAG,MAAK;MAC3B,IAAIH,SAAS,CAACI,KAAK,EAAE;QACnBJ,SAAS,CAACI,KAAK,CAACC,KAAK,EAAE;;IAE3B,CAAC;IAED,MAAMC,gBAAgB,GAAIC,CAAQ,IAAI;MACpC,MAAMC,MAAM,GAAGD,CAAC,CAACC,MAA0B;MAC3C,MAAMC,KAAK,GAAGD,MAAM,CAACC,KAAK;MAC1B,IAAIA,KAAK,EAAE;QACT,MAAMC,YAAY,GAAGD,KAAK,CAAC,CAAC,CAAC;QAC7B,MAAME,QAAQ,GAAG,IAAIC,QAAQ,EAAE;QAC/B,MAAMC,OAAO,GAAGzB,QAAQ,CAAa;UACnC0B,GAAG,EAAEvB,MAAM,EAAE;UACbwB,IAAI,EAAEL,YAAY,CAACK,IAAI;UACvBC,IAAI,EAAEN,YAAY,CAACM,IAAI;UACvBC,MAAM,EAAE,SAAS;UACjBC,GAAG,EAAER;SACN,CAAC;QACFR,aAAa,CAACE,KAAK,CAACe,IAAI,CAACN,OAAO,CAAC;QACjCF,QAAQ,CAACS,MAAM,CAACV,YAAY,CAACM,IAAI,EAAEN,YAAY,CAAC;QAChDT,UAAU,CAACG,KAAK,GAAG,SAAS;QAC5Bf,KAAK,CAACgC,IAAI,CAAC5B,KAAK,CAACC,MAAM,EAAEiB,QAAQ,EAAE;UACjCW,OAAO,EAAE;YACP,cAAc,EAAE;;SAEnB,CAAC,CAACC,IAAI,CAACC,GAAG,IAAG;UACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAAC;UACrB1B,UAAU,CAACG,KAAK,GAAG,SAAS;UAC5BS,OAAO,CAACI,MAAM,GAAG,SAAS;QAC5B,CAAC,CAAC,CAACW,KAAK,CAAC,MAAK;UACZ3B,UAAU,CAACG,KAAK,GAAG,OAAO;UAC1BS,OAAO,CAACI,MAAM,GAAG,OAAO;QAC1B,CAAC,CAAC;;IAEN,CAAC;IAGD,MAAMY,YAAY,GAAG;MAAEpC,KAAK;MAAEO,SAAS;MAAEC,UAAU;MAAEC,aAAa;MAAEC,eAAe;MAAEG;IAAgB,CAAE;IACvGwB,MAAM,CAACC,cAAc,CAACF,YAAY,EAAE,iBAAiB,EAAE;MAAEG,UAAU,EAAE,KAAK;MAAE5B,KAAK,EAAE;IAAI,CAAE,CAAC;IAC1F,OAAOyB,YAAY;EACnB;CAEC,CAAC","names":["defineComponent","_defineComponent","ref","reactive","axios","v4","uuidv4","__name","props","action","type","String","setup","__props","expose","fileInput","fileStatus","uploadedFiles","triggerUploader","value","click","handleFileChange","e","target","files","uploadedFile","formData","FormData","fileObj","uid","size","name","status","raw","push","append","post","headers","then","res","console","log","data","catch","__returned__","Object","defineProperty","enumerable"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\Uploader.vue?vue&type=script&setup=true&lang=ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { ref, reactive } from 'vue'\r\nimport axios from 'axios'\r\nimport { v4 as uuidv4} from 'uuid'\r\n\r\ntype uploadStatus = 'ready' | 'loading' | 'success' | 'error'\r\nexport interface UploadFile {\r\n uid: string;\r\n name: string;\r\n size: number;\r\n status: string;\r\n raw: File;\r\n}\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Uploader',\n  props: {\r\n  action: {\r\n    type: String\r\n  }\r\n},\n  setup(__props, { expose }) {\n  expose();\n\nconst props = __props;\n\r\n\r\n\r\nconst fileInput = ref<null | HTMLInputElement>(null)\r\nconst fileStatus = ref<uploadStatus>('ready')\r\nconst uploadedFiles = ref<UploadFile[]>([])\r\n\r\nconst triggerUploader = () => {\r\n  if (fileInput.value) {\r\n    fileInput.value.click()\r\n  }\r\n}\r\n\r\nconst handleFileChange = (e: Event) => {\r\n  const target = e.target as HTMLInputElement\r\n  const files = target.files\r\n  if (files) {\r\n    const uploadedFile = files[0]\r\n    const formData = new FormData()\r\n    const fileObj = reactive<UploadFile>({\r\n      uid: uuidv4(),\r\n      size: uploadedFile.size,\r\n      name: uploadedFile.name,\r\n      status: 'loading',\r\n      raw: uploadedFile\r\n    })\r\n    uploadedFiles.value.push(fileObj)\r\n    formData.append(uploadedFile.name, uploadedFile)\r\n    fileStatus.value = 'loading'\r\n    axios.post(props.action, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    }).then(res => {\r\n      console.log(res.data);\r\n      fileStatus.value = 'success'\r\n      fileObj.status = 'success'\r\n    }).catch(() => {\r\n      fileStatus.value = 'error'\r\n      fileObj.status = 'error'\r\n    })\r\n  }\r\n}\r\n\r\n\nconst __returned__ = { props, fileInput, fileStatus, uploadedFiles, triggerUploader, handleFileChange }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})"]}]}