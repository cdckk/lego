{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--16-2!D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\components\\PropsTable.tsx","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\PropsTable.tsx","mtime":1679218835669},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1679070494323},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js","mtime":1674816759137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyByZWR1Y2UgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBtYXBQcm9wc1RvRm9ybXMgfSBmcm9tICcuLi9wcm9wc01hcCc7CmltcG9ydCB7IElucHV0LCBJbnB1dE51bWJlciwgSW5wdXRHcm91cCwgU2VsZWN0LCBTZWxlY3RPcHRpb24sIFNsaWRlciwgUmFkaW9Hcm91cCwgUmFkaW9CdXR0b24gfSBmcm9tICdhbnQtZGVzaWduLXZ1ZSc7CmltcG9ydCBDb2xvclBpY2tlciBmcm9tICcuL0NvbG9yUGlja2VyLnZ1ZSc7Ci8vIOe7hOS7tuWunuS+iwpjb25zdCBtYXBUb0NvbXBvbmVudCA9IHsKICAnY29sb3ItcGlja2VyJzogQ29sb3JQaWNrZXIsCiAgJ2EtaW5wdXQnOiBJbnB1dCwKICAnYS1pbnB1dC1udW1iZXInOiBJbnB1dE51bWJlciwKICAnYS1pbnB1dC1ncm91cCc6IElucHV0R3JvdXAsCiAgJ2Etc2VsZWN0JzogU2VsZWN0LAogICdhLXNlbGVjdC1vcHRpb24nOiBTZWxlY3RPcHRpb24sCiAgJ2Etc2xpZGVyJzogU2xpZGVyLAogICdhLXJhZGlvLWdyb3VwJzogUmFkaW9Hcm91cCwKICAnYS1yYWRpby1idXR0b24nOiBSYWRpb0J1dHRvbiwKICAnYS10ZXh0YXJlYSc6IElucHV0LlRleHRBcmVhCn07CmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdExldHRlcihzdHJpbmcpIHsKICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpOwp9CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcHJvcHM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgZW1pdHM6IFsnY2hhbmdlJ10sCiAgc2V0dXAocHJvcHMsIGNvbnRleHQpIHsKICAgIGNvbnN0IGZpbmFsUHJvcHMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiByZWR1Y2UocHJvcHMucHJvcHMsIChyZXN1bHQsIHZhbHVlLCBrZXkpID0+IHsKICAgICAgICBjb25zdCBuZXdLZXkgPSBrZXk7CiAgICAgICAgLyoqIOWboOS4um1hcFByb3BzVG9Gb3Jtc+eahGtleeaYr+iBlOWQiOexu+Wei++8jOaJgOS7pWtleeimgei/m+ihjOexu+Wei+aWreiogCAqLwogICAgICAgIGNvbnN0IGl0ZW0gPSBtYXBQcm9wc1RvRm9ybXNbbmV3S2V5XTsKICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICB2YWx1ZVByb3AgPSAndmFsdWUnLAogICAgICAgICAgICBldmVudE5hbWUgPSAnY2hhbmdlJywKICAgICAgICAgICAgaW50aWFsVHJhbnNmb3JtLAogICAgICAgICAgICBhZnRlclRyYW5zZm9ybQogICAgICAgICAgfSA9IGl0ZW07CiAgICAgICAgICAvLyDovazmjaLmlbDmja7nu5PmnoQKICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7CiAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgIC8vIOi9rOaNouaVsOaNruexu+WeiwogICAgICAgICAgICAvKiogYnVnICovCiAgICAgICAgICAgIHZhbHVlOiBpbnRpYWxUcmFuc2Zvcm0gPyBpbnRpYWxUcmFuc2Zvcm0odmFsdWUpIDogdmFsdWUsCiAgICAgICAgICAgIHZhbHVlUHJvcCwKICAgICAgICAgICAgZXZlbnROYW1lLAogICAgICAgICAgICBldmVudHM6IHsKICAgICAgICAgICAgICBbJ29uJyArIGNhcGl0YWxpemVGaXJzdExldHRlcihldmVudE5hbWUpXTogZSA9PiB7CiAgICAgICAgICAgICAgICBjb250ZXh0LmVtaXQoJ2NoYW5nZScsIHsKICAgICAgICAgICAgICAgICAga2V5LAogICAgICAgICAgICAgICAgICB2YWx1ZTogYWZ0ZXJUcmFuc2Zvcm0gPyBhZnRlclRyYW5zZm9ybShlKSA6IGUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIHJlc3VsdFtuZXdLZXldID0gbmV3SXRlbTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSwge30pOwogICAgfSk7CiAgICByZXR1cm4gKCkgPT4gX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICAgICJjbGFzcyI6ICJwcm9wcy10YWJsZSIKICAgIH0sIFtPYmplY3Qua2V5cyhmaW5hbFByb3BzLnZhbHVlKS5tYXAoa2V5ID0+IHsKICAgICAgY29uc3QgdmFsdWUgPSBmaW5hbFByb3BzLnZhbHVlW2tleV07CiAgICAgIGNvbnN0IHByb3BzID0gewogICAgICAgIFt2YWx1ZS52YWx1ZVByb3BdOiB2YWx1ZS52YWx1ZSwKICAgICAgICAuLi52YWx1ZS5leHRyYVByb3BzLAogICAgICAgIC4uLnZhbHVlLmV2ZW50cwogICAgICB9OwogICAgICBjb25zdCBDb21wb25lbnROYW1lID0gbWFwVG9Db21wb25lbnRbdmFsdWUuY29tcG9uZW50XTsKICAgICAgY29uc3QgU3ViQ29tcG9uZW50ID0gdmFsdWUuc3ViQ29tcG9uZW50ICYmIG1hcFRvQ29tcG9uZW50W3ZhbHVlLnN1YkNvbXBvbmVudF07CiAgICAgIHJldHVybiBfY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgICAgICAia2V5Ijoga2V5LAogICAgICAgICJjbGFzcyI6ICJwcm9wLWl0ZW0iLAogICAgICAgICJzdHlsZSI6ICJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxMHB4IgogICAgICB9LCBbdmFsdWUudGV4dCAmJiBfY3JlYXRlVk5vZGUoInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogImxhYmVsIiwKICAgICAgICAic3R5bGUiOiAid2lkdGg6IDI4JSIKICAgICAgfSwgW3ZhbHVlLnRleHRdKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogInByb3AtY29tcG9uZW50IiwKICAgICAgICAic3R5bGUiOiAid2lkdGg6IDcyJSIKICAgICAgfSwgW19jcmVhdGVWTm9kZShDb21wb25lbnROYW1lLCBwcm9wcywgewogICAgICAgIGRlZmF1bHQ6ICgpID0+IFt2YWx1ZS5vcHRpb25zICYmIHZhbHVlLm9wdGlvbnMubWFwKG9wdGlvbiA9PiB7CiAgICAgICAgICByZXR1cm4gX2NyZWF0ZVZOb2RlKFN1YkNvbXBvbmVudCwgewogICAgICAgICAgICAidmFsdWUiOiBvcHRpb24udmFsdWUKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gW29wdGlvbi50ZXh0XQogICAgICAgICAgfSk7CiAgICAgICAgfSldCiAgICAgIH0pXSldKTsKICAgIH0pXSk7CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["computed","reduce","mapPropsToForms","Input","InputNumber","InputGroup","Select","SelectOption","Slider","RadioGroup","RadioButton","ColorPicker","mapToComponent","TextArea","capitalizeFirstLetter","string","charAt","toUpperCase","slice","props","type","Object","required","id","String","emits","setup","context","finalProps","result","value","key","newKey","item","valueProp","eventName","intialTransform","afterTransform","newItem","events","e","emit","keys","map","extraProps","ComponentName","component","SubComponent","subComponent","text","options","option"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\components\\PropsTable.tsx"],"sourcesContent":["import { VNode } from 'vue'\r\nimport { PropType, computed } from 'vue'\r\nimport { reduce } from 'lodash'\r\nimport { mapPropsToForms } from '../propsMap'\r\nimport { TextComponentProps } from '../defaultProps'\r\nimport { TextImageComponentProps, ImageComponentProps } from '../defaultProps'\r\nimport { Input, InputNumber, InputGroup, Select, SelectOption, Slider, RadioGroup, RadioButton } from 'ant-design-vue'\r\nimport ColorPicker from './ColorPicker.vue'\r\n\r\n// 组件实例\r\nconst mapToComponent = {\r\n  'color-picker': ColorPicker,\r\n  'a-input': Input,\r\n  'a-input-number': InputNumber,\r\n  'a-input-group': InputGroup,\r\n  'a-select': Select,\r\n  'a-select-option': SelectOption,\r\n  'a-slider': Slider,\r\n  'a-radio-group': RadioGroup,\r\n  'a-radio-button': RadioButton,\r\n  'a-textarea': Input.TextArea\r\n} as any\r\n\r\n// 渲染表单的数据\r\ninterface FormProps {\r\n  component: string;\r\n  subComponent?: string;\r\n  value: string;\r\n  extraProps?: { [key: string]: any };\r\n  text?: string;\r\n  options?: { text: string | VNode; value: any }[];\r\n  valueProp: string;\r\n  eventName: string;\r\n  events: { [key: string]: (e: any) => void };\r\n  src?: string;\r\n}\r\n\r\nfunction capitalizeFirstLetter(string: string) {\r\n  return string.charAt(0).toUpperCase() + string.slice(1)\r\n}\r\n\r\nexport default {\r\n  props: {\r\n    props: {\r\n      type: Object as PropType< Partial<TextComponentProps & ImageComponentProps>>,\r\n      required: true\r\n    },\r\n    id: {\r\n      type: String\r\n    }\r\n  },\r\n  emits: ['change'],\r\n  setup(props, context) {\r\n    const finalProps = computed(() => {\r\n      return reduce(props.props, (result, value, key) => {\r\n        const newKey = key as keyof TextImageComponentProps\r\n        /** 因为mapPropsToForms的key是联合类型，所以key要进行类型断言 */\r\n        const item = mapPropsToForms[newKey]\r\n        if (item) {\r\n          const { valueProp = 'value', eventName = 'change', intialTransform, afterTransform } = item\r\n          // 转换数据结构\r\n          const newItem: FormProps = {\r\n            ...item,\r\n            // 转换数据类型\r\n            /** bug */\r\n            value: intialTransform ? intialTransform(value) : value,\r\n            valueProp,\r\n            eventName,\r\n            events: {\r\n              ['on' + capitalizeFirstLetter(eventName)]: (e: any) => { context.emit('change', { key, value: afterTransform ? afterTransform(e) : e })}\r\n            }\r\n          }\r\n          result[newKey] = newItem\r\n        }\r\n        return result\r\n      }, {} as {[key: string]: FormProps})\r\n    })\r\n    return () => <div class=\"props-table\">\r\n      {\r\n        Object.keys(finalProps.value).map(key => {\r\n          const value = finalProps.value[key]\r\n          const props = {\r\n            [value.valueProp]: value.value,\r\n            ...value.extraProps,\r\n            ...value.events\r\n          }\r\n          const ComponentName = mapToComponent[value.component]\r\n          const SubComponent = value.subComponent && mapToComponent[value.subComponent]\r\n          return (\r\n            <div key={key} class=\"prop-item\" style=\"display: flex; align-items: center; margin-bottom: 10px\">\r\n              { value.text && <span class=\"label\" style=\"width: 28%\">{value.text}</span>}\r\n              <div class=\"prop-component\" style=\"width: 72%\">\r\n                <ComponentName {...props}>\r\n                  {\r\n                    value.options && value.options.map(option => {\r\n                      return (\r\n                        <SubComponent value={option.value}>{option.text}</SubComponent>\r\n                      )\r\n                    })\r\n                  }\r\n                </ComponentName>\r\n              </div>\r\n            </div>\r\n          )\r\n        })\r\n      }\r\n    </div>\r\n  }\r\n}"]}]}