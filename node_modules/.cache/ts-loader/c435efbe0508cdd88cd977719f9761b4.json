{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\Uploader.vue?vue&type=script&setup=true&lang=ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\Uploader.vue","mtime":1677514846819},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1677514846241},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyByZWYsIHJlYWN0aXZlLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBGaWxlSW1hZ2VPdXRsaW5lZCwgeyBMb2FkaW5nT3V0bGluZWQsIEZpbGVPdXRsaW5lZCB9IGZyb20gJy4uLy4uL25vZGVfbW9kdWxlcy9AYW50LWRlc2lnbi9pY29ucy12dWUnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJzsKaW1wb3J0IHsgbGFzdCB9IGZyb20gJ2xvZGFzaC1lcyc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldEltYWdlRGltZW5zaW9ucyB9IGZyb20gJy4uL2hlbHBlcic7CmV4cG9ydCBkZWZhdWx0IC8qI19fUFVSRV9fKi9fZGVmaW5lQ29tcG9uZW50KHsKICBfX25hbWU6ICdVcGxvYWRlcicsCiAgcHJvcHM6IHsKICAgIGFjdGlvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGF0YScKICAgIH0sCiAgICBiZWZvcmVVcGxvYWQ6IHsKICAgICAgdHlwZTogRnVuY3Rpb24KICAgIH0sCiAgICAvLyDmmK/lkKblvIDlkK/mi5bmi73kuIrkvKAKICAgIGRyYWc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDpu5jorqToh6rliqjkuIrkvKAKICAgIGF1dG9VcGxvYWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGxpc3RUeXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3RleHQnCiAgICB9LAogICAgc2hvd1VwbG9hZGVkTGlzdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9CiAgfSwKICBzZXR1cChfX3Byb3BzLCB7CiAgICBleHBvc2UKICB9KSB7CiAgICBjb25zdCBwcm9wcyA9IF9fcHJvcHM7CiAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICBjb25zdCBmaWxlSW5wdXQgPSByZWYobnVsbCk7CiAgICBjb25zdCBmaWxlU3RhdHVzID0gcmVmKCdyZWFkeScpOwogICAgY29uc3QgZmlsZXNMaXN0ID0gcmVmKFtdKTsKICAgIC8vIGNvbnN0IHVwbG9hZGVkRmlsZXMgPSByZWY8VXBsb2FkRmlsZVtdPihbXSkKICAgIGNvbnN0IGlzRHJhZ092ZXIgPSByZWYoZmFsc2UpOwogICAgY29uc3QgaXNVcGxvYWRpbmcgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIC8vIOWPquimgeacieS4gOmhueeahOetieS6jmxvYWRpbmfvvIzmlbTkuKrmjInpkq7lsLHmmK9pc2xvYWRpbmcKICAgICAgcmV0dXJuIGZpbGVzTGlzdC52YWx1ZS5zb21lKGZpbGUgPT4gZmlsZS5zdGF0dXMgPT09ICdsb2FkaW5nJyk7CiAgICB9KTsKICAgIGNvbnN0IGxhc3RGaWxlRGF0YSA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgY29uc3QgbGFzdEZpbGUgPSBsYXN0KGZpbGVzTGlzdC52YWx1ZSk7CiAgICAgIGlmIChsYXN0RmlsZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb2FkZWQ6IGxhc3RGaWxlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnLAogICAgICAgICAgZGF0YTogbGFzdEZpbGUucmVzcAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CiAgICBjb25zdCByZW1vdmVGaWxlID0gaWQgPT4gewogICAgICBmaWxlc0xpc3QudmFsdWUgPSBmaWxlc0xpc3QudmFsdWUuZmlsdGVyKGZpbGUgPT4gewogICAgICAgIHJldHVybiBmaWxlLnVpZCAhPT0gaWQ7CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHRyaWdnZXJVcGxvYWRlciA9ICgpID0+IHsKICAgICAgaWYgKGZpbGVJbnB1dC52YWx1ZSkgewogICAgICAgIGZpbGVJbnB1dC52YWx1ZS5jbGljaygpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgcG9zdEZpbGUgPSByZWFkeUZpbGUgPT4gewogICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAvLyBjb25zdCBpc2VFeGlzdGVuY2UgPSB1cGxvYWRlZEZpbGVzLnZhbHVlLnNvbWUoKGZpbGUpID0+IGZpbGUubmFtZSA9PT0gZmlsZU9iai5uYW1lICkKICAgICAgLy8gaWYoIWlzZUV4aXN0ZW5jZSkgewogICAgICAvLyB1cGxvYWRlZEZpbGVzLnZhbHVlLnB1c2goZmlsZU9iaikKICAgICAgLy8gfQogICAgICBmb3JtRGF0YS5hcHBlbmQocmVhZHlGaWxlLm5hbWUsIHJlYWR5RmlsZS5yYXcpOwogICAgICByZWFkeUZpbGUuc3RhdHVzID0gJ2xvYWRpbmcnOwogICAgICBheGlvcy5wb3N0KHByb3BzLmFjdGlvbiwgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOaIkOWKnycsIHJlcy5kYXRhKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZWFkeUZpbGUucmF3KTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZWFkeUZpbGUudXJsKTsKICAgICAgICByZXMuZGF0YS51cmwgPSByZWFkeUZpbGUudXJsOwogICAgICAgIGZpbGVTdGF0dXMudmFsdWUgPSAnc3VjY2Vzcyc7CiAgICAgICAgcmVhZHlGaWxlLnN0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgICBjb25zdCBnZXRXaWR0aCA9IHdpZHRoID0+IHsKICAgICAgICAgIGNvbnN0IG1heFdpZHRoID0gMzc1OwogICAgICAgICAgcmVzLmRhdGEud2lkdGggPSB3aWR0aCA+IG1heFdpZHRoID8gbWF4V2lkdGggOiB3aWR0aDsKICAgICAgICB9OwogICAgICAgIHRyeSB7CiAgICAgICAgICBnZXRJbWFnZURpbWVuc2lvbnMocmVzLmRhdGEudXJsKS50aGVuKGFzeW5jICh7CiAgICAgICAgICAgIHdpZHRoCiAgICAgICAgICB9KSA9PiB7CiAgICAgICAgICAgIC8vIGdldEltYWdlRGltZW5zaW9ucyhyZWFkeUZpbGUucmVzcC51cmwpLnRoZW4oYXN5bmMgKHt3aWR0aH0pID0+IHsKICAgICAgICAgICAgYXdhaXQgZ2V0V2lkdGgod2lkdGgpOwogICAgICAgICAgICBjb25zb2xlLmxvZygncmVzLmRhdGEnLCByZXMuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpOwogICAgICAgIH0KICAgICAgICByZWFkeUZpbGUucmVzcCA9IHJlcy5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKCdyZWFkeUZpbGUucmVzcC53aWR0aCcsIHJlYWR5RmlsZS5yZXNwLndpZHRoKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGNvbnN0IGltYWdlUHJvcHMgPSB7CiAgICAgICAgICAgIHNyYzogcmVhZHlGaWxlLnJlc3AudXJsLAogICAgICAgICAgICB3aWR0aDogcmVhZHlGaWxlLnJlc3Aud2lkdGgKICAgICAgICAgIH07CiAgICAgICAgICBjb25zb2xlLmxvZygnaW1hZ2VQcm9wcycsIGltYWdlUHJvcHMpOwogICAgICAgICAgc3RvcmUuY29tbWl0KCdhZGRDb21wb25lbnQnLCBpbWFnZVByb3BzKTsKICAgICAgICB9LCA1MDApOwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDlpLHotKUnLCBlcnIpOwogICAgICAgIGZpbGVTdGF0dXMudmFsdWUgPSAnZXJyb3InOwogICAgICAgIHJlYWR5RmlsZS5zdGF0dXMgPSAnZXJyb3InOwogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICBpZiAoZmlsZUlucHV0LnZhbHVlKSB7CiAgICAgICAgICBmaWxlSW5wdXQudmFsdWUudmFsdWUgPSAnJzsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGFkZEZpbGVUb0xpc3QgPSB1cGxvYWRlZEZpbGUgPT4gewogICAgICBjb25zdCBmaWxlT2JqID0gcmVhY3RpdmUoewogICAgICAgIHVpZDogdXVpZHY0KCksCiAgICAgICAgc2l6ZTogdXBsb2FkZWRGaWxlLnNpemUsCiAgICAgICAgbmFtZTogdXBsb2FkZWRGaWxlLm5hbWUsCiAgICAgICAgc3RhdHVzOiAncmVhZHknLAogICAgICAgIHJhdzogdXBsb2FkZWRGaWxlCiAgICAgIH0pOwogICAgICBpZiAocHJvcHMubGlzdFR5cGUgPT09ICdwaWN0dXJlJykgewogICAgICAgIC8vIOmYsuatoui9rOaNoumUmeivrwogICAgICAgIHRyeSB7CiAgICAgICAgICBmaWxlT2JqLnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwodXBsb2FkZWRGaWxlKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VwbG9hZCBmaWxlIGVycm9yJywgZXJyKTsKICAgICAgICB9CiAgICAgICAgLy8gY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkKICAgICAgICAvLyBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwodXBsb2FkZWRGaWxlKQogICAgICAgIC8vIGZpbGVSZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgICAvLyAgIGZpbGVPYmoudXJsID0gZmlsZVJlYWRlci5yZXN1bHQgYXMgc3RyaW5nCiAgICAgICAgLy8gfSkKICAgICAgfQoKICAgICAgZmlsZXNMaXN0LnZhbHVlLnB1c2goZmlsZU9iaik7CiAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGVzTGlzdC52YWx1ZSk7CiAgICAgIGlmIChwcm9wcy5hdXRvVXBsb2FkKSB7CiAgICAgICAgcG9zdEZpbGUoZmlsZU9iaik7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBiZWZvcmVVcGxvYWRDaGVjayA9IGZpbGVzID0+IHsKICAgICAgaWYgKGZpbGVzKSB7CiAgICAgICAgY29uc3QgdXBsb2FkZWRGaWxlID0gZmlsZXNbMF07CiAgICAgICAgLy8g5LiK5Lyg5YmN55qE5qOA5p+lCiAgICAgICAgaWYgKHByb3BzLmJlZm9yZVVwbG9hZCkgewogICAgICAgICAgY29uc3QgcmVzdWx0ID0gcHJvcHMuYmVmb3JlVXBsb2FkKHVwbG9hZGVkRmlsZSk7CiAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICAgICAgcmVzdWx0LnRoZW4ocHJvY2Vzc0ZpbGUgPT4gewogICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgKiDmlrDlhpLlh7rmnaXnmoTlr7nosaHvvIzlubbkuI3nn6XpgZPmmK/ku4DkuYjnsbvlnovvvIznm7TmjqXov5vooYzlpITnkIbkvJrmnInpl67popgNCiAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgLy8g6L+Z6YeM5bm25LiN55+l6YGTcHJvY2Vzc0ZpbGXnmoTnsbvlnovvvIzopoHliKTmlq0KICAgICAgICAgICAgICBpZiAocHJvY2Vzc0ZpbGUgaW5zdGFuY2VvZiBGaWxlKSB7CiAgICAgICAgICAgICAgICBhZGRGaWxlVG9MaXN0KHByb2Nlc3NGaWxlKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiZWZvcmVVcGxvYWQgUHJvbWlzZSBzaG91bGQgcmV0dXJuIEZpbGUgb2JqZWN0Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkgewogICAgICAgICAgICBhZGRGaWxlVG9MaXN0KHVwbG9hZGVkRmlsZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFkZEZpbGVUb0xpc3QodXBsb2FkZWRGaWxlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICAvLyDmmrTpnLLlh7p1cGxvYWRGaWxlc+aWueazlQogICAgY29uc3QgdXBsb2FkRmlsZXMgPSAoKSA9PiB7CiAgICAgIGZpbGVzTGlzdC52YWx1ZS5maWx0ZXIoZmlsZSA9PiBmaWxlLnN0YXR1cyA9ICdyZWFkeScpLmZvckVhY2gocmVhZHlGaWxlID0+IHBvc3RGaWxlKHJlYWR5RmlsZSkpOwogICAgfTsKICAgIGxldCBldmVudHMgPSB7CiAgICAgICdjbGljayc6IHRyaWdnZXJVcGxvYWRlcgogICAgfTsKICAgIC8vIOW9k+S4iuS8oOahhuacieWbvueJhwogICAgY29uc3QgaGFuZGxlRmlsZUNoYW5nZSA9IGUgPT4gewogICAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7CiAgICAgIGNvbnN0IGZpbGVzID0gdGFyZ2V0LmZpbGVzOwogICAgICBiZWZvcmVVcGxvYWRDaGVjayhmaWxlcyk7CiAgICB9OwogICAgLy8g5ouWCiAgICBjb25zdCBoYW5kbGVEcmFnID0gKGUsIG92ZXIpID0+IHsKICAgICAgLy8g56ys5LqM5Liq5Y+C5pWw5Luj6KGoY2xhc3Pmt7vliqDmiJbogIXkuI3mt7vliqAKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpc0RyYWdPdmVyLnZhbHVlID0gb3ZlcjsKICAgIH07CiAgICAvLyDokL3kuIsKICAgIGNvbnN0IGhhbmRsZURyb3AgPSBlID0+IHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpc0RyYWdPdmVyLnZhbHVlID0gZmFsc2U7CiAgICAgIGlmIChlLmRhdGFUcmFuc2ZlcikgewogICAgICAgIC8vIOaLv+WIsOaJmOaUvuS4i+eahOaVsOaNrgogICAgICAgIGJlZm9yZVVwbG9hZENoZWNrKGUuZGF0YVRyYW5zZmVyLmZpbGVzKTsKICAgICAgfQogICAgfTsKICAgIC8vIOa3u+WKoOWFtuS7lueahOS6i+S7tgogICAgaWYgKHByb3BzLmRyYWcpIHsKICAgICAgZXZlbnRzID0gewogICAgICAgIC4uLmV2ZW50cywKICAgICAgICAnZHJhZ292ZXInOiBlID0+IHsKICAgICAgICAgIGhhbmRsZURyYWcoZSwgdHJ1ZSk7CiAgICAgICAgfSwKICAgICAgICAnZHJhZ2xlYXZlJzogZSA9PiB7CiAgICAgICAgICBoYW5kbGVEcmFnKGUsIGZhbHNlKTsKICAgICAgICB9LAogICAgICAgICdkcm9wJzogaGFuZGxlRHJvcAogICAgICB9OwogICAgfQogICAgZXhwb3NlKHsKICAgICAgdXBsb2FkRmlsZXMKICAgIH0pOwogICAgY29uc3QgX19yZXR1cm5lZF9fID0gewogICAgICBwcm9wcywKICAgICAgc3RvcmUsCiAgICAgIGZpbGVJbnB1dCwKICAgICAgZmlsZVN0YXR1cywKICAgICAgZmlsZXNMaXN0LAogICAgICBpc0RyYWdPdmVyLAogICAgICBpc1VwbG9hZGluZywKICAgICAgbGFzdEZpbGVEYXRhLAogICAgICByZW1vdmVGaWxlLAogICAgICB0cmlnZ2VyVXBsb2FkZXIsCiAgICAgIHBvc3RGaWxlLAogICAgICBhZGRGaWxlVG9MaXN0LAogICAgICBiZWZvcmVVcGxvYWRDaGVjaywKICAgICAgdXBsb2FkRmlsZXMsCiAgICAgIGdldCBldmVudHMoKSB7CiAgICAgICAgcmV0dXJuIGV2ZW50czsKICAgICAgfSwKICAgICAgc2V0IGV2ZW50cyh2KSB7CiAgICAgICAgZXZlbnRzID0gdjsKICAgICAgfSwKICAgICAgaGFuZGxlRmlsZUNoYW5nZSwKICAgICAgaGFuZGxlRHJhZywKICAgICAgaGFuZGxlRHJvcCwKICAgICAgZ2V0IEZpbGVJbWFnZU91dGxpbmVkKCkgewogICAgICAgIHJldHVybiBGaWxlSW1hZ2VPdXRsaW5lZDsKICAgICAgfSwKICAgICAgZ2V0IExvYWRpbmdPdXRsaW5lZCgpIHsKICAgICAgICByZXR1cm4gTG9hZGluZ091dGxpbmVkOwogICAgICB9LAogICAgICBnZXQgRmlsZU91dGxpbmVkKCkgewogICAgICAgIHJldHVybiBGaWxlT3V0bGluZWQ7CiAgICAgIH0KICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn0pOw=="},{"version":3,"mappings":"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","names":["defineComponent","_defineComponent","ref","reactive","computed","FileImageOutlined","LoadingOutlined","FileOutlined","axios","v4","uuidv4","last","useStore","getImageDimensions","__name","props","action","type","String","default","beforeUpload","Function","drag","Boolean","autoUpload","listType","showUploadedList","setup","__props","expose","store","fileInput","fileStatus","filesList","isDragOver","isUploading","value","some","file","status","lastFileData","lastFile","loaded","data","resp","removeFile","id","filter","uid","triggerUploader","click","postFile","readyFile","formData","FormData","append","name","raw","post","headers","then","res","console","log","url","getWidth","width","maxWidth","error","setTimeout","imageProps","src","commit","catch","err","finally","addFileToList","uploadedFile","fileObj","size","URL","createObjectURL","push","beforeUploadCheck","files","result","Promise","processFile","File","Error","e","uploadFiles","forEach","events","handleFileChange","target","handleDrag","over","preventDefault","handleDrop","dataTransfer","__returned__","v","Object","defineProperty","enumerable"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\Uploader.vue?vue&type=script&setup=true&lang=ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { ref, reactive, computed, PropType } from 'vue'\r\nimport FileImageOutlined, {LoadingOutlined, FileOutlined} from '../../node_modules/@ant-design/icons-vue'\r\nimport axios from 'axios'\r\nimport { v4 as uuidv4} from 'uuid'\r\nimport { last } from 'lodash-es'\r\nimport { useStore } from 'vuex'\r\nimport {ImageComponentProps} from '../defaultProps'\r\nimport { getImageDimensions } from '../helper'\r\n\r\ntype uploadStatus = 'ready' | 'loading' | 'success' | 'error'\r\n// picture带预览的功能\r\ntype FileListType = 'picture' | 'text '\r\ntype CheckUpload = (file: File) => boolean | Promise<File>\r\nexport interface UploadFile {\r\n uid: string;\r\n name: string;\r\n size: number;\r\n status: string;\r\n raw: File;\r\n resp?: any;\r\n url?: string;\r\n width?: number;\r\n}\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Uploader',\n  props: {\r\n  action: {\r\n    type: String,\r\n    default: 'http://localhost:3000/data'\r\n  },\r\n  beforeUpload: {\r\n    type: Function as PropType<CheckUpload>\r\n  },\r\n  // 是否开启拖拽上传\r\n  drag: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  // 默认自动上传\r\n  autoUpload: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  listType: {\r\n    type: String as PropType<FileListType>,\r\n    default: 'text'\r\n  },\r\n  showUploadedList: {\r\n    type: Boolean,\r\n    default: true\r\n  }\r\n},\n  setup(__props, { expose }) {\n\nconst props = __props;\n\r\n\r\n\r\nconst store = useStore()\r\n\r\nconst fileInput = ref<null | HTMLInputElement>(null)\r\nconst fileStatus = ref<uploadStatus>('ready')\r\nconst filesList = ref<UploadFile[]>([])\r\n// const uploadedFiles = ref<UploadFile[]>([])\r\nconst isDragOver = ref(false)\r\nconst isUploading = computed(() => {\r\n  // 只要有一项的等于loading，整个按钮就是isloading\r\n  return filesList.value.some(file => file.status === 'loading' )\r\n})\r\nconst lastFileData = computed(() => {\r\n  const lastFile = last(filesList.value)\r\n  if (lastFile) {\r\n    return {\r\n      loaded: lastFile.status === 'success',\r\n      data: lastFile.resp\r\n    }\r\n  }\r\n  return false\r\n})\r\nconst removeFile = (id: string) => {\r\n  filesList.value = filesList.value.filter(file => {\r\n    return file.uid !== id\r\n  })\r\n}\r\n\r\nconst triggerUploader = () => {\r\n  if (fileInput.value) {\r\n    fileInput.value.click()\r\n  }\r\n}\r\n\r\nconst postFile = (readyFile: UploadFile) => {\r\n  const formData = new FormData() \r\n  // const iseExistence = uploadedFiles.value.some((file) => file.name === fileObj.name )\r\n  // if(!iseExistence) {\r\n  // uploadedFiles.value.push(fileObj)\r\n  // }\r\n  \r\n  formData.append(readyFile.name, readyFile.raw)\r\n  readyFile.status = 'loading'\r\n  axios.post(props.action, formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    }\r\n  }).then(res => {\r\n    console.log('上传成功',res.data);\r\n    // console.log(readyFile.raw);\r\n    // console.log(readyFile.url);\r\n    res.data.url = readyFile.url\r\n    fileStatus.value = 'success'\r\n    readyFile.status = 'success'\r\n    \r\n    const getWidth = (width: number) => {\r\n      const maxWidth = 375\r\n      res.data.width = (width > maxWidth) ? maxWidth : width\r\n    }\r\n    try {\r\n      getImageDimensions(res.data.url).then(async ({width}) => {\r\n      // getImageDimensions(readyFile.resp.url).then(async ({width}) => {\r\n        await getWidth(width)\r\n        console.log('res.data', res.data);\r\n        \r\n      })\r\n    } catch (error) {\r\n      console.log('error', error);\r\n    }\r\n    readyFile.resp = res.data\r\n    console.log('readyFile.resp.width',readyFile.resp.width);\r\n    setTimeout(() => {\r\n      const imageProps: Partial<ImageComponentProps> = {\r\n        src: readyFile.resp.url,\r\n        width: readyFile.resp.width\r\n      }\r\n      console.log('imageProps',imageProps);\r\n      store.commit('addComponent', imageProps)\r\n    }, 500)\r\n    \r\n  }).catch((err) => {\r\n    console.log('上传失败', err);\r\n    fileStatus.value = 'error'\r\n    readyFile.status = 'error'\r\n  }).finally(() => {\r\n    if (fileInput.value) {\r\n      fileInput.value.value = ''\r\n    }\r\n  })\r\n}\r\n\r\nconst addFileToList = (uploadedFile: File) => {\r\n  const fileObj = reactive<UploadFile>({\r\n    uid: uuidv4(),\r\n    size: uploadedFile.size,\r\n    name: uploadedFile.name,\r\n    status: 'ready',\r\n    raw: uploadedFile\r\n  })\r\n  if (props.listType === 'picture') {\r\n    // 防止转换错误\r\n    try {\r\n      fileObj.url = URL.createObjectURL(uploadedFile)\r\n    } catch (err) {\r\n      console.error('upload file error', err)\r\n    }\r\n    // const fileReader = new FileReader()\r\n    // fileReader.readAsDataURL(uploadedFile)\r\n    // fileReader.addEventListener('load', () => {\r\n    //   fileObj.url = fileReader.result as string\r\n    // })\r\n  }\r\n  filesList.value.push(fileObj)\r\n  // console.log(filesList.value);\r\n  \r\n  if (props.autoUpload) {\r\n    postFile(fileObj)\r\n  }\r\n}\r\n\r\nconst beforeUploadCheck = (files: null | FileList) => {\r\n  if (files) {\r\n    const uploadedFile = files[0]\r\n    // 上传前的检查\r\n    if (props.beforeUpload) {\r\n      const result = props.beforeUpload(uploadedFile)\r\n      if (result && result instanceof Promise) {\r\n        result.then(processFile => {\r\n          /**\r\n           * 新冒出来的对象，并不知道是什么类型，直接进行处理会有问题\r\n           */\r\n          // 这里并不知道processFile的类型，要判断\r\n          if (processFile instanceof File) {\r\n            addFileToList(processFile)\r\n          } else {\r\n            throw new Error('beforeUpload Promise should return File object')\r\n          }\r\n        }).catch(e => {\r\n          console.log(e);\r\n        })\r\n      } else if (result === true) {\r\n        addFileToList(uploadedFile)\r\n      }\r\n    } else {\r\n      addFileToList(uploadedFile)\r\n    }\r\n  }\r\n}\r\n\r\n// 暴露出uploadFiles方法\r\nconst uploadFiles = () => {\r\n  filesList.value.filter(file => file.status = 'ready').forEach(readyFile => postFile(readyFile))\r\n}\r\n\r\nlet events: { [key: string]: (e: any) => void } = {\r\n  'click': triggerUploader\r\n}\r\n\r\n// 当上传框有图片\r\nconst handleFileChange = (e: Event) => {\r\n  // console.log(e);\r\n  \r\n  const target = e.target as HTMLInputElement\r\n  const files = target.files\r\n  beforeUploadCheck(files)\r\n}\r\n\r\n// 拖\r\nconst handleDrag = (e: DragEvent, over: boolean) => {\r\n  // 第二个参数代表class添加或者不添加\r\n  e.preventDefault()\r\n  isDragOver.value = over\r\n}\r\n// 落下\r\nconst handleDrop = (e: DragEvent) => {\r\n  e.preventDefault()\r\n  isDragOver.value = false\r\n  if (e.dataTransfer) {\r\n    // 拿到托放下的数据\r\n    beforeUploadCheck(e.dataTransfer.files)\r\n  }\r\n}\r\n\r\n// 添加其他的事件\r\nif (props.drag) {\r\n  events = {\r\n    ...events,\r\n    'dragover': (e: DragEvent) => { handleDrag(e, true) },\r\n    'dragleave': (e: DragEvent) => { handleDrag(e, false) },\r\n    'drop': handleDrop\r\n  }\r\n}\r\n\r\nexpose({\r\n  uploadFiles\r\n})\r\n\r\n\nconst __returned__ = { props, store, fileInput, fileStatus, filesList, isDragOver, isUploading, lastFileData, removeFile, triggerUploader, postFile, addFileToList, beforeUploadCheck, uploadFiles, get events() { return events }, set events(v) { events = v }, handleFileChange, handleDrag, handleDrop, get FileImageOutlined() { return FileImageOutlined }, get LoadingOutlined() { return LoadingOutlined }, get FileOutlined() { return FileOutlined } }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})"]}]}