{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue?vue&type=script&setup=true&lang=ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue","mtime":1678017423655},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1677514846241},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyByZWYsIHdhdGNoLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB1c2VLZXlQcmVzcyBmcm9tICcuLi9ob29rcy91c2VLZXlQcmVzcyc7CmltcG9ydCB1c2VDbGlja091dHNpZGUgZnJvbSAnLi4vaG9va3MvdXNlQ2xpY2tPdXRzaWRlJzsKZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL19kZWZpbmVDb21wb25lbnQoewogIF9fbmFtZTogJ0lubGluZUVkaXQnLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVlc3Q6IHRydWUKICAgIH0KICB9LAogIGVtaXRzOiBbJ2NoYW5nZSddLAogIHNldHVwKF9fcHJvcHMsIHsKICAgIGV4cG9zZSwKICAgIGVtaXQKICB9KSB7CiAgICBleHBvc2UoKTsKICAgIGNvbnN0IHByb3BzID0gX19wcm9wczsKICAgIGxldCBjYWNoZU9sZFZhbHVlID0gJyc7CiAgICBjb25zdCBpbm5lclZhbHVlID0gcmVmKHByb3BzLnZhbHVlKTsKICAgIGNvbnN0IGlzRWRpdGluZyA9IHJlZihmYWxzZSk7CiAgICBjb25zdCB3cmFwcGVyID0gcmVmKG51bGwpOwogICAgY29uc3QgaW5wdXRSZWYgPSByZWYobnVsbCk7CiAgICBjb25zdCBpc091dHNpZGUgPSB1c2VDbGlja091dHNpZGUod3JhcHBlcik7CiAgICB3YXRjaChpc091dHNpZGUsIG5ld1ZhbHVlID0+IHsKICAgICAgY29uc29sZS5sb2coaXNPdXRzaWRlLnZhbHVlLCBuZXdWYWx1ZSk7CiAgICAgIGlmIChuZXdWYWx1ZSAmJiBpc0VkaXRpbmcudmFsdWUpIHsKICAgICAgICBpc0VkaXRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICBlbWl0KCdjaGFuZ2UnLCBpbm5lclZhbHVlLnZhbHVlKTsKICAgICAgfQogICAgICBpc091dHNpZGUudmFsdWUgPSBmYWxzZTsKICAgIH0pOwogICAgd2F0Y2goaXNFZGl0aW5nLCBhc3luYyBpc0VkaXRpbmcgPT4gewogICAgICBpZiAoaXNFZGl0aW5nKSB7CiAgICAgICAgY2FjaGVPbGRWYWx1ZSA9IGlubmVyVmFsdWUudmFsdWU7CiAgICAgICAgYXdhaXQgbmV4dFRpY2soKTsKICAgICAgICBpZiAoaW5wdXRSZWYudmFsdWUpIHsKICAgICAgICAgIGlucHV0UmVmLnZhbHVlLmZvY3VzKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gKCkgPT4gewogICAgICBpc0VkaXRpbmcudmFsdWUgPSB0cnVlOwogICAgICBjb25zb2xlLmxvZygn54K557uE5Lu2Jyk7CiAgICAgIC8qKg0KICAgICAgICog57uE5Lu25pu05paw5piv5byC5q2l55qEDQogICAgICAgKi8KICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIC8vICAgaWYgKGlucHV0UmVmLnZhbHVlKSB7CiAgICAgIC8vICAgICBpbnB1dFJlZi52YWx1ZS5mb2N1cygpCiAgICAgIC8vICAgfQogICAgICAvLyB9LCA1MDApOwogICAgfTsKCiAgICB1c2VLZXlQcmVzcygnRW50ZXInLCAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdlbnRlcuS6i+S7ticpOwogICAgICBpZiAoaXNFZGl0aW5nLnZhbHVlKSB7CiAgICAgICAgaXNFZGl0aW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgZW1pdCgnY2hhbmdlJywgaW5uZXJWYWx1ZS52YWx1ZSk7CiAgICAgIH0KICAgIH0pOwogICAgdXNlS2V5UHJlc3MoJ0VzY2FwZScsICgpID0+IHsKICAgICAgaWYgKGlzRWRpdGluZy52YWx1ZSkgewogICAgICAgIGlzRWRpdGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIGlubmVyVmFsdWUudmFsdWUgPSBjYWNoZU9sZFZhbHVlOwogICAgICB9CiAgICB9KTsKICAgIGNvbnN0IF9fcmV0dXJuZWRfXyA9IHsKICAgICAgcHJvcHMsCiAgICAgIGdldCBjYWNoZU9sZFZhbHVlKCkgewogICAgICAgIHJldHVybiBjYWNoZU9sZFZhbHVlOwogICAgICB9LAogICAgICBzZXQgY2FjaGVPbGRWYWx1ZSh2KSB7CiAgICAgICAgY2FjaGVPbGRWYWx1ZSA9IHY7CiAgICAgIH0sCiAgICAgIGVtaXQsCiAgICAgIGlubmVyVmFsdWUsCiAgICAgIGlzRWRpdGluZywKICAgICAgd3JhcHBlciwKICAgICAgaW5wdXRSZWYsCiAgICAgIGlzT3V0c2lkZSwKICAgICAgaGFuZGxlQ2xpY2sKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn0pOw=="},{"version":3,"mappings":"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","names":["defineComponent","_defineComponent","ref","watch","nextTick","useKeyPress","useClickOutside","__name","props","value","type","String","request","emits","setup","__props","expose","emit","cacheOldValue","innerValue","isEditing","wrapper","inputRef","isOutside","newValue","console","log","focus","handleClick","__returned__","v","Object","defineProperty","enumerable"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue?vue&type=script&setup=true&lang=ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { ref, watch, nextTick } from 'vue'\r\nimport useKeyPress from '../hooks/useKeyPress'\r\nimport useClickOutside from '../hooks/useClickOutside'\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'InlineEdit',\n  props: {\r\n  value: {\r\n    type: String,\r\n    request: true\r\n  }\r\n},\n  emits: ['change'],\n  setup(__props, { expose, emit }) {\n  expose();\n\nconst props = __props;\n\r\n\r\nlet cacheOldValue: string | undefined = ''\r\n\r\nconst innerValue = ref(props.value)\r\nconst isEditing = ref<boolean>(false)\r\nconst wrapper = ref<null | HTMLElement>(null)\r\nconst inputRef = ref<null | HTMLElement>(null)\r\nconst isOutside = useClickOutside(wrapper)\r\nwatch(isOutside, (newValue) => {\r\n  console.log(isOutside.value,newValue)\r\n  if (newValue && isEditing.value) {\r\n    isEditing.value = false\r\n    emit('change', innerValue.value)\r\n  }\r\n  isOutside.value = false\r\n})\r\nwatch(isEditing, async (isEditing) => {\r\n  if (isEditing) {\r\n    cacheOldValue = innerValue.value\r\n    await nextTick()\r\n    if (inputRef.value) {\r\n      inputRef.value.focus()\r\n    }\r\n  }\r\n})\r\nconst handleClick = () => {\r\n  isEditing.value = true\r\n  console.log('点组件');\r\n  \r\n  /**\r\n   * 组件更新是异步的\r\n   */\r\n  // setTimeout(() => {\r\n  //   if (inputRef.value) {\r\n  //     inputRef.value.focus()\r\n  //   }\r\n  // }, 500);\r\n  \r\n}\r\nuseKeyPress('Enter', () => {\r\n  console.log('enter事件');\r\n  \r\n  if (isEditing.value) {\r\n    isEditing.value = false\r\n    emit('change', innerValue.value)\r\n  }\r\n})\r\nuseKeyPress('Escape', () => {\r\n  if (isEditing.value) {\r\n    isEditing.value = false\r\n    innerValue.value = cacheOldValue\r\n  }\r\n})\r\n\r\n\nconst __returned__ = { props, get cacheOldValue() { return cacheOldValue }, set cacheOldValue(v) { cacheOldValue = v }, emit, innerValue, isEditing, wrapper, inputRef, isOutside, handleClick }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})"]}]}