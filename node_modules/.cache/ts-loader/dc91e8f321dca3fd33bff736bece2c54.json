{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\store\\editor.ts","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\store\\editor.ts","mtime":1679628118601},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1679070494323},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\ts-loader\\index.js","mtime":1674816768512},{"path":"D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js","mtime":1674816759137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnOwppbXBvcnQgeyB0ZXh0RGVmYXVsdFByb3BzIH0gZnJvbSAnLi4vZGVmYXVsdFByb3BzJzsKZXhwb3J0IGNvbnN0IHRlc3RDb21wb25lbnRzID0gW3sKICBpZDogdXVpZHY0KCksCiAgbmFtZTogJ0xUZXh0JywKICBsYXllck5hbWU6ICflm77lsYIxJywKICBpc0xvY2tlZDogZmFsc2UsCiAgaXNIaWRkZW46IHRydWUsCiAgcHJvcHM6IHsKICAgIC4uLnRleHREZWZhdWx0UHJvcHMsCiAgICB0ZXh0OiAnaGVsbG8nLAogICAgZm9udFNpemU6ICc1MHB4JywKICAgIGNvbG9yOiAncmVkJywKICAgIGxpbmVIZWlnaHQ6ICcxJywKICAgIHRleHRBbGlnbjogJ2xlZnQnLAogICAgZm9udEZhbWlseTogJycsCiAgICB3aWR0aDogJzEwMHB4JywKICAgIGhlaWdodDogJzEwMHB4JywKICAgIGJhY2tncm91bmRDb2xvcjogJyNlZmVmZWYnLAogICAgbGVmdDogJzEwcHgnLAogICAgdG9wOiAnMTBweCcsCiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJwogIH0KfQovLyB7IGlkOiB1dWlkdjQoKSwgbmFtZTogJ0xUZXh0JywgbGF5ZXJOYW1lOiAn5Zu+5bGCMScsIGlzTG9ja2VkOiBmYWxzZSwgaXNIaWRkZW46IHRydWUsIHByb3BzOiB7IC4uLnRleHREZWZhdWx0UHJvcHMsIHRleHQ6ICdoZWxsbycsIGZvbnRTaXplOiAnNTBweCcsIGNvbG9yOiAncmVkJywgbGluZUhlaWdodDogJzEnLCB0ZXh0QWxpZ246ICdsZWZ0JywgZm9udEZhbWlseTogJyd9fSwKLy8geyBpZDogdXVpZHY0KCksIG5hbWU6ICdMVGV4dCcsIGxheWVyTmFtZTogJ+WbvuWxgjInLCBpc0xvY2tlZDogZmFsc2UsIGlzSGlkZGVuOiB0cnVlLCBwcm9wczogeyAuLi50ZXh0RGVmYXVsdFByb3BzLCB0ZXh0OiAnaGVsbG8yJywgZm9udFNpemU6ICcyNXB4JywgbGluZUhlaWdodDogJzEnLCB0ZXh0QWxpZ246ICdsZWZ0JyB9fSwKLy8geyBpZDogdXVpZHY0KCksIG5hbWU6ICdMVGV4dCcsIGxheWVyTmFtZTogJ+WbvuWxgjMnLCBpc0xvY2tlZDogZmFsc2UsIGlzSGlkZGVuOiB0cnVlLCBwcm9wczogeyAuLi50ZXh0RGVmYXVsdFByb3BzLCB0ZXh0OiAnaGVsbG8zJywgZm9udFNpemU6ICcxNXB4JywgYWN0aW9uVHlwZTogJ3VybCcsIHVybDogJ2h0dHBzOi8vd3d3LmJhaWR1LmNvbS8nLCB0ZXh0QWxpZ246ICdsZWZ0JyB9fQpdOwoKZXhwb3J0IGNvbnN0IHBhZ2VEZWZhdWx0UHJvcHMgPSB7CiAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsCiAgYmFja2dyb3VuZEltYWdlOiAnJywKICBiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0JywKICBiYWNrZ3JvdW5kU2l6ZTogJ2NvdmVyJywKICBoZWlnaHQ6ICc1NjBweCcKfTsKY29uc3QgZWRpdG9yID0gewogIHN0YXRlOiB7CiAgICBjb21wb25lbnRzOiB0ZXN0Q29tcG9uZW50cywKICAgIGN1cnJlbnRFbGVtZW50OiAnJywKICAgIHBhZ2U6IHsKICAgICAgcHJvcHM6IHBhZ2VEZWZhdWx0UHJvcHMsCiAgICAgIHRpdGxlOiAndGVzdCB0aXRsZScKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgYWRkQ29tcG9uZW50KHN0YXRlLCBwcm9wcykgewogICAgICAvLyBhZGRDb21wb25lbnQoc3RhdGUsIGNvbXBvbmVudDogQ29tcG9uZW50RGF0YSkgewogICAgICAvLyBjb25zdCBuZXdDb21wb25lbnQ6IENvbXBvbmVudERhdGEgPSB7IGlkOiB1dWlkdjQoKSwgbmFtZTogJ0xUZXh0JywgcHJvcHMgfQogICAgICAvLyBzdGF0ZS5jb21wb25lbnRzLnB1c2gobmV3Q29tcG9uZW50KQogICAgICAvLyBwcm9wcy5oYXNPd25Qcm9wZXJ0eS5jYWxsKCd0ZXh0JykKICAgICAgaWYgKCd0ZXh0JyBpbiBwcm9wcykgewogICAgICAgIGNvbnN0IG5ld0NvbXBvbmVudCA9IHsKICAgICAgICAgIGlkOiB1dWlkdjQoKSwKICAgICAgICAgIG5hbWU6ICdMVGV4dCcsCiAgICAgICAgICBwcm9wcwogICAgICAgIH07CiAgICAgICAgc3RhdGUuY29tcG9uZW50cy5wdXNoKG5ld0NvbXBvbmVudCk7CiAgICAgIH0gZWxzZSBpZiAoJ3NyYycgaW4gcHJvcHMpIHsKICAgICAgICBjb25zb2xlLmxvZygncHJvcHMnLCBwcm9wcyk7CiAgICAgICAgY29uc3QgbmV3Q29tcG9uZW50ID0gewogICAgICAgICAgaWQ6IHV1aWR2NCgpLAogICAgICAgICAgbmFtZTogJ0xJbWFnZScsCiAgICAgICAgICBwcm9wcwogICAgICAgIH07CiAgICAgICAgc3RhdGUuY29tcG9uZW50cy5wdXNoKG5ld0NvbXBvbmVudCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVDb21wb25lbnQoc3RhdGUsIHByb3BzKSB7CiAgICAgIC8qKg0KICAgICAgICog5Yig6Zmk5pWw57uE5Lit5oyH5a6a5pWw57uE5a+56LGhDQogICAgICAgKi8KICAgICAgc3RhdGUuY29tcG9uZW50cy5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyKSA9PiB7CiAgICAgICAgaWYgKGl0ZW0ucHJvcHMudGV4dCA9PT0gcHJvcHMudGV4dCkgewogICAgICAgICAgYXJyLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZXRBY3RpdmUoc3RhdGUsIGN1cnJlbnRJZCkgewogICAgICBzdGF0ZS5jdXJyZW50RWxlbWVudCA9IGN1cnJlbnRJZDsKICAgICAgY29uc29sZS5sb2coY3VycmVudElkKTsKICAgIH0sCiAgICB1cGRhdGVDb21wb25lbnQoc3RhdGUsIHsKICAgICAga2V5LAogICAgICB2YWx1ZSwKICAgICAgaWQsCiAgICAgIGlzUm9vdAogICAgfSkgewogICAgICBjb25zb2xlLmxvZygndnVleCBpZCcsIGlkKTsKICAgICAgLy8gdXBkYXRlQ29tcG9uZW505piv5a+5c3RhdGUuY29tcG9uZW50c+eahOW8leeUqAogICAgICBjb25zdCB1cGRhdGVDb21wb25lbnQgPSBzdGF0ZS5jb21wb25lbnRzLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSAoaWQgfHwgc3RhdGUuY3VycmVudEVsZW1lbnQpKTsKICAgICAgaWYgKHVwZGF0ZUNvbXBvbmVudCkgewogICAgICAgIGlmIChpc1Jvb3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGtleSwgdmFsdWUpOwogICAgICAgICAgdXBkYXRlQ29tcG9uZW50W2tleV0gPSB2YWx1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKHVwZGF0ZUNvbXBvbmVudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOmcgOimgeS4gOS4quWxnuaAp+adpeWGs+WumuS/ruaUuXByb3Bz6L+Y5piv5LiA57qn5bGe5oCnCiAgICAgICAgICB1cGRhdGVDb21wb25lbnQucHJvcHNba2V5XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgZ2V0Q3VycmVudEVsZW1lbnQ6IHN0YXRlID0+IHsKICAgICAgY29uc29sZS5sb2coJ+mHjeaWsOiuoeeulycpOwogICAgICByZXR1cm4gc3RhdGUuY29tcG9uZW50cy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gc3RhdGUuY3VycmVudEVsZW1lbnQpOwogICAgfQogICAgLy8gZ2V0RGVmYXVsdEVsZW1lbnQ6IChzdGF0ZSkgPT4gewogICAgLy8gICByZXR1cm4gc3RhdGUuY29tcG9uZW50c1swXQogICAgLy8gfQogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IGVkaXRvcjs="},{"version":3,"mappings":"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","names":["v4","uuidv4","textDefaultProps","testComponents","id","name","layerName","isLocked","isHidden","props","text","fontSize","color","lineHeight","textAlign","fontFamily","width","height","backgroundColor","left","top","position","pageDefaultProps","backgroundImage","backgroundRepeat","backgroundSize","editor","state","components","currentElement","page","title","mutations","addComponent","newComponent","push","console","log","deleteComponent","forEach","item","index","arr","splice","setActive","currentId","updateComponent","key","value","isRoot","find","getters","getCurrentElement"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\vue3-project\\lego\\src\\store\\editor.ts"],"sourcesContent":["import { Module } from 'vuex'\r\nimport { GlobalDataProps } from './index'\r\nimport { v4 as uuidv4 } from 'uuid'\r\nimport { TextComponentProps, textDefaultProps, imageDefaultProps } from '../defaultProps'\r\nimport { ImageComponentProps } from '../defaultProps'\r\nimport { AllComponentProps } from 'lego-bricks'\r\n\r\nexport interface ComponentData {\r\n  // props: { [key: string]: any };\r\n  props: Partial<TextComponentProps & ImageComponentProps>;\r\n  id: string;\r\n  // name: string;\r\n  // 业务组件的名称\r\n  name: 'LText' | 'LImage' | 'LShape';\r\n  isHidden?: boolean;\r\n  isLocked?: boolean;\r\n  layerName?: string;\r\n}\r\n\r\nexport interface EditorProps {\r\n  components: ComponentData[];\r\n  currentElement: string;\r\n  page: PageData;\r\n}\r\n\r\nexport interface PageProps {\r\n  backgroundColor: string;\r\n  backgroundImage: string;\r\n  backgroundRepeat: string;\r\n  backgroundSize: string;\r\n  height: string;\r\n}\r\n\r\nexport type AllFormProps = PageProps & AllComponentProps\r\n\r\nexport interface PageData {\r\n  props: PageProps;\r\n  title: string;\r\n}\r\n\r\nexport const testComponents: ComponentData[] = [\r\n  { id: uuidv4(), name: 'LText', layerName: '图层1', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello', fontSize: '50px', color: 'red', lineHeight: '1', textAlign: 'left', fontFamily: '', width: '100px', height: '100px', backgroundColor: '#efefef', left: '10px', top: '10px', position: 'absolute'}},\r\n  // { id: uuidv4(), name: 'LText', layerName: '图层1', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello', fontSize: '50px', color: 'red', lineHeight: '1', textAlign: 'left', fontFamily: ''}},\r\n  // { id: uuidv4(), name: 'LText', layerName: '图层2', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello2', fontSize: '25px', lineHeight: '1', textAlign: 'left' }},\r\n  // { id: uuidv4(), name: 'LText', layerName: '图层3', isLocked: false, isHidden: true, props: { ...textDefaultProps, text: 'hello3', fontSize: '15px', actionType: 'url', url: 'https://www.baidu.com/', textAlign: 'left' }}\r\n]\r\n\r\nexport const pageDefaultProps = {\r\n  backgroundColor: '#ffffff',\r\n  backgroundImage: '',\r\n  backgroundRepeat: 'no-repeat',\r\n  backgroundSize: 'cover',\r\n  height: '560px'\r\n}\r\n\r\nconst editor: Module<EditorProps, GlobalDataProps> = {\r\n  state: {\r\n    components: testComponents,\r\n    currentElement: '',\r\n    page: {\r\n      props: pageDefaultProps,\r\n      title: 'test title'\r\n    }\r\n  },\r\n  mutations: {\r\n    addComponent(state, props: Partial<TextComponentProps | ImageComponentProps>) {\r\n    // addComponent(state, component: ComponentData) {\r\n      // const newComponent: ComponentData = { id: uuidv4(), name: 'LText', props }\r\n      // state.components.push(newComponent)\r\n      // props.hasOwnProperty.call('text')\r\n      if ('text' in props) {\r\n        const newComponent: ComponentData = { id: uuidv4(), name: 'LText', props }\r\n        state.components.push(newComponent)\r\n      } else if ('src' in props) {\r\n        console.log('props', props);\r\n        \r\n        const newComponent: ComponentData = { id: uuidv4(), name: 'LImage', props }\r\n        state.components.push(newComponent)\r\n      }\r\n    },\r\n    deleteComponent(state, props) {\r\n      /**\r\n       * 删除数组中指定数组对象\r\n       */\r\n      state.components.forEach((item, index, arr) => {\r\n        if(item.props.text === props.text) {\r\n          arr.splice(index, 1)\r\n        }\r\n      })\r\n    },\r\n    setActive(state, currentId: string) {\r\n      state.currentElement = currentId\r\n      console.log(currentId);\r\n      \r\n    },\r\n    updateComponent(state, { key, value, id, isRoot }) {\r\n      console.log('vuex id', id);\r\n      \r\n      // updateComponent是对state.components的引用\r\n      const updateComponent = state.components.find((item) => item.id === (id || state.currentElement))\r\n      if(updateComponent) { \r\n        if (isRoot) {\r\n          console.log(key, value);\r\n          (updateComponent as any)[key] = value\r\n          console.log(updateComponent);\r\n          \r\n        } else {\r\n          // 需要一个属性来决定修改props还是一级属性\r\n          updateComponent.props[key as keyof TextComponentProps] = value\r\n        }\r\n      }\r\n    }\r\n  },\r\n  getters: {\r\n    getCurrentElement: (state) => {\r\n      console.log('重新计算');\r\n      \r\n      return state.components.find((item) => item.id === state.currentElement)\r\n    },\r\n    // getDefaultElement: (state) => {\r\n    //   return state.components[0]\r\n    // }\r\n  }\r\n}\r\n\r\nexport default editor"]}]}