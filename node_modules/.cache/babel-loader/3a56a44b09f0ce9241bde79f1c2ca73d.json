{"remainingRequest":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js!D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue?vue&type=script&slang=ts&lang=js","dependencies":[{"path":"D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue","mtime":1677909876293},{"path":"D:\\vue3-project\\lego\\babel.config.js","mtime":1677514846241},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\babel-loader\\lib\\index.js","mtime":1674816767357},{"path":"D:\\vue3-project\\lego\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674816758787},{"path":"D:\\vue3-project\\lego\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1674816769351}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmLCBkZWZpbmVQcm9wcywgZGVmaW5lRW1pdHMsIHdhdGNoIH0gZnJvbSAndnVlJzsKaW1wb3J0IHVzZUtleVByZXNzIGZyb20gJy4uL2hvb2tzL3VzZUtleVByZXNzJzsKaW1wb3J0IHVzZUNsaWNrT3V0c2lkZSBmcm9tICcuLi9ob29rcy91c2VDbGlja091dHNpZGUnOwpjb25zdCBwcm9wcyA9IGRlZmluZVByb3BzKHsKICB2YWx1ZTogewogICAgdHlwZTogU3RyaW5nLAogICAgcmVxdWVzdDogdHJ1ZQogIH0KfSk7CmxldCBjYWNoZU9sZFZhbHVlID0gJyc7CmNvbnN0IGVtaXQgPSBkZWZpbmVFbWl0cyhbJ2NoYW5nZSddKTsKY29uc3QgaW5uZXJWYWx1ZSA9IHJlZihwcm9wcy52YWx1ZSk7CmNvbnN0IGlzRWRpdGluZyA9IHJlZiA8IGJvb2xlYW4gPiBmYWxzZTsKY29uc3Qgd3JhcHBlciA9IHJlZiA8IG51bGwgfCBIVE1MRWxlbWVudCA+IG51bGw7CmNvbnN0IGlzT3V0c2lkZSA9IHVzZUNsaWNrT3V0c2lkZSh3cmFwcGVyKTsKd2F0Y2goaXNPdXRzaWRlLCBuZXdWYWx1ZSA9PiB7CiAgaWYgKG5ld1ZhbHVlICYmIGlzRWRpdGluZy52YWx1ZSkgewogICAgaXNFZGl0aW5nLnZhbHVlID0gZmFsc2U7CiAgICBlbWl0KCdjaGFuZ2UnLCBpbm5lclZhbHVlLnZhbHVlKTsKICB9Cn0pOwp3YXRjaChpc0VkaXRpbmcsIGlzRWRpdGluZyA9PiB7CiAgaWYgKGlzRWRpdGluZyAmJiBpbm5lclZhbHVlLnZhbHVlKSB7CiAgICBjYWNoZU9sZFZhbHVlID0gaW5uZXJWYWx1ZS52YWx1ZTsKICB9Cn0pOwpjb25zdCBoYW5kbGVDbGljayA9ICgpID0+IHsKICBjb25zb2xlLmxvZygnZGlhbmppJyk7CiAgaXNFZGl0aW5nLnZhbHVlID0gdHJ1ZTsKfTsKdXNlS2V5UHJlc3MoJ0VudGVyJywgKCkgPT4gewogIGlmIChpc0VkaXRpbmcudmFsdWUpIHsKICAgIGlzRWRpdGluZy52YWx1ZSA9IGZhbHNlOwogICAgZW1pdCgnY2hhbmdlJywgaW5uZXJWYWx1ZS52YWx1ZSk7CiAgfQp9KTsKdXNlS2V5UHJlc3MoJ0VzY29wZScsICgpID0+IHsKICBpZiAoaXNFZGl0aW5nLnZhbHVlKSB7CiAgICBpc0VkaXRpbmcudmFsdWUgPSBmYWxzZTsKICAgIGlubmVyVmFsdWUudmFsdWUgPSBjYWNoZU9sZFZhbHVlOwogIH0KfSk7"},{"version":3,"mappings":"AAiBA,SAASA,GAAG,EAAEC,WAAW,EAAEC,WAAW,EAAEC,KAAI,QAAS,KAAI;AACzD,OAAOC,WAAU,MAAO,sBAAqB;AAC7C,OAAOC,eAAc,MAAO,0BAAyB;AACrD,MAAMC,KAAI,GAAIL,WAAW,CAAC;EACxBM,KAAK,EAAE;IACLC,IAAI,EAAEC,MAAM;IACZC,OAAO,EAAE;EACX;AACF,CAAC;AACD,IAAIC,aAAY,GAAI,EAAC;AACrB,MAAMC,IAAG,GAAIV,WAAW,CAAC,CAAC,QAAQ,CAAC;AACnC,MAAMW,UAAS,GAAIb,GAAG,CAACM,KAAK,CAACC,KAAK;AAClC,MAAMO,SAAQ,GAAId,GAAG,GAACe,OAAO,GAAE,KAAK;AACpC,MAAMC,OAAM,GAAIhB,GAAG,GAAC,IAAG,GAAIiB,WAAW,GAAE,IAAI;AAC5C,MAAMC,SAAQ,GAAIb,eAAe,CAACW,OAAO;AACzCb,KAAK,CAACe,SAAS,EAAGC,QAAQ,IAAK;EAC7B,IAAIA,QAAO,IAAKL,SAAS,CAACP,KAAK,EAAE;IAC/BO,SAAS,CAACP,KAAI,GAAI,KAAI;IACtBK,IAAI,CAAC,QAAQ,EAAEC,UAAU,CAACN,KAAK;EACjC;AACF,CAAC;AACDJ,KAAK,CAACW,SAAS,EAAGA,SAAS,IAAK;EAC9B,IAAIA,SAAQ,IAAKD,UAAU,CAACN,KAAK,EAAE;IACjCI,aAAY,GAAIE,UAAU,CAACN,KAAI;EACjC;AACF,CAAC;AACD,MAAMa,WAAU,GAAI,MAAM;EACxBC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;EAErBR,SAAS,CAACP,KAAI,GAAI,IAAG;AACvB;AACAH,WAAW,CAAC,OAAO,EAAE,MAAM;EACzB,IAAIU,SAAS,CAACP,KAAK,EAAE;IACnBO,SAAS,CAACP,KAAI,GAAI,KAAI;IACtBK,IAAI,CAAC,QAAQ,EAAEC,UAAU,CAACN,KAAK;EACjC;AACF,CAAC;AACDH,WAAW,CAAC,QAAQ,EAAE,MAAM;EAC1B,IAAIU,SAAS,CAACP,KAAK,EAAE;IACnBO,SAAS,CAACP,KAAI,GAAI,KAAI;IACtBM,UAAU,CAACN,KAAI,GAAII,aAAY;EACjC;AACF,CAAC","names":["ref","defineProps","defineEmits","watch","useKeyPress","useClickOutside","props","value","type","String","request","cacheOldValue","emit","innerValue","isEditing","boolean","wrapper","HTMLElement","isOutside","newValue","handleClick","console","log"],"sourceRoot":"","sources":["D:\\vue3-project\\lego\\src\\components\\InlineEdit.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"inline-edit\" \r\n    @click.stop=\"handleClick\"\r\n    ref=\"wrapper\"\r\n  >\r\n    <input\r\n      v-model=\"innerValue\"\r\n      v-if=\"isEditing\"\r\n      placeholder=\"文本不能为空\"\r\n      ref=\"inputRef\"\r\n      type=\"text\" />\r\n    <slot v-else><span>{{innerValue}}</span></slot>\r\n  </div>\r\n</template>\r\n\r\n<script slang=\"ts\">\r\nimport { ref, defineProps, defineEmits, watch } from 'vue'\r\nimport useKeyPress from '../hooks/useKeyPress'\r\nimport useClickOutside from '../hooks/useClickOutside'\r\nconst props = defineProps({\r\n  value: {\r\n    type: String,\r\n    request: true\r\n  }\r\n})\r\nlet cacheOldValue = ''\r\nconst emit = defineEmits(['change'])\r\nconst innerValue = ref(props.value)\r\nconst isEditing = ref<boolean>(false)\r\nconst wrapper = ref<null | HTMLElement>(null)\r\nconst isOutside = useClickOutside(wrapper)\r\nwatch(isOutside, (newValue) => {\r\n  if (newValue && isEditing.value) {\r\n    isEditing.value = false\r\n    emit('change', innerValue.value)\r\n  }\r\n})\r\nwatch(isEditing, (isEditing) => {\r\n  if (isEditing && innerValue.value) {\r\n    cacheOldValue = innerValue.value\r\n  }\r\n})\r\nconst handleClick = () => {\r\n  console.log('dianji');\r\n  \r\n  isEditing.value = true\r\n}\r\nuseKeyPress('Enter', () => {\r\n  if (isEditing.value) {\r\n    isEditing.value = false\r\n    emit('change', innerValue.value)\r\n  }\r\n})\r\nuseKeyPress('Escope', () => {\r\n  if (isEditing.value) {\r\n    isEditing.value = false\r\n    innerValue.value = cacheOldValue\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n</style>\r\n"]}]}